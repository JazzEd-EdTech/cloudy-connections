{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./core/js/systemtags/merged-systemtags.js","webpack:///./core/js/systemtags/systemtags.js","webpack:///./core/js/systemtags/templates.js","webpack:///./core/js/systemtags/systemtagmodel.js","webpack:///./core/js/systemtags/systemtagsmappingcollection.js","webpack:///./core/js/systemtags/systemtagscollection.js","webpack:///./core/js/systemtags/systemtagsinputfield.js","webpack:///./core/css/systemtags.scss?50be","webpack:///./core/css/systemtags.scss","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./node_modules/style-loader/lib/urls.js"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","OC","SystemTags","getDescriptiveTag","tag","_","isUndefined","name","toJSON","$","addClass","text","t","scope","$span","append","escapeHTML","userAssignable","userVisible","$tag","template","templates","Handlebars","Templates","container","depth0","helpers","partials","data","stack1","helper","tagMarkup","helperMissing","nullContext","escapeExpression","renameTooltip","options","alias1","alias2","buffer","isNew","program","noop","id","isAdmin","allowActions","blockHelperMissing","deleteTooltip","alias4","cid","renameLabel","extend","Files","Client","PROPERTY_FILEID","NS_OWNCLOUD","PROPERTY_CAN_ASSIGN","PROPERTY_DISPLAYNAME","PROPERTY_USERVISIBLE","PROPERTY_USERASSIGNABLE","SystemTagModel","Backbone","Model","sync","davSync","defaults","canAssign","davProperties","parse","SystemTagsMappingCollection","Collection","usePUT","_objectId","_objectType","model","url","linkToRemote","this","setObjectId","objectId","setObjectType","objectType","initialize","models","getTagIds","map","SystemTagsCollection","filterByName","filter","term","substr","length","toLowerCase","filterFunction","reset","fetched","apply","arguments","fetch","self","force","success","trigger","Promise","resolve","collection","SystemTagsInputField","View","_rendered","_newTag","_lastUsedTags","className","_multiple","multiple","_allowActions","_allowCreate","allowCreate","_isAdmin","isFunction","initSelection","_initSelection","on","defer","_refreshSelection","_getLastUsedTags","bindAll","ajax","type","generateUrl","response","$tagsField","select2","val","_onClickRenameTag","ev","$item","target","closest","tagId","attr","oldName","$renameForm","find","after","tooltip","placement","focus","selectRange","_onSubmitRenameTag","preventDefault","$form","tagModel","newName","trim","save","removeClass","remove","_onClickDeleteTag","destroy","_addToSelect2Selection","selection","push","_onSelectTag","e","create","unshift","error","xhr","status","where","_onDeselectTag","choice","_queryTagsAutocomplete","query","tagModels","callback","results","invoke","_preventDefault","stopPropagation","_formatDropDownResult","innerHTML","_formatSelection","_createSearchChoice","entry","element","ids","split","modelToSelection","locked","selectedModels","indexOf","findSelectedObjects","render","$el","html","placeholder","containerCssClass","dropdownCssClass","closeOnSelect","allowClear","toggleSelect","formatResult","formatSelection","createSearchChoice","undefined","sortResults","selectedItems","pluck","sort","a","b","aSelected","bSelected","aLastUsed","bLastUsed","Util","naturalSortCompare","formatNoMatches","$dropDown","delegateEvents","getValues","setValues","values","setData","content","i","transform","locals","exports","useSourceMap","list","toString","item","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","modules","mediaQuery","alreadyImportedModules","fn","memo","stylesInDom","isOldIE","window","document","all","atob","getTarget","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","splice","createStyleElement","createElement","attrs","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","replace","fullMatch","origUrl","newUrl","unquotedOrigUrl","o","$1","test"],"mappings":"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","file":"systemtags.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 10);\n","import './systemtags.js'\nimport './templates.js'\nimport './systemtagmodel.js'\nimport './systemtagsmappingcollection.js'\nimport './systemtagscollection.js'\nimport './systemtagsinputfield.js'\n\nimport '../../css/systemtags.scss'\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC) {\n\t/**\n\t * @namespace\n\t */\n\tOC.SystemTags = {\n\t\t/**\n\t\t *\n\t\t * @param {OC.SystemTags.SystemTagModel|Object|String} tag\n\t\t * @return {jQuery}\n\t\t */\n\t\tgetDescriptiveTag: function(tag) {\n\t\t\tif (_.isUndefined(tag.name) && !_.isUndefined(tag.toJSON)) {\n\t\t\t\ttag = tag.toJSON();\n\t\t\t}\n\n\t\t\tif (_.isUndefined(tag.name)) {\n\t\t\t\treturn $('<span>').addClass('non-existing-tag').text(\n\t\t\t\t\tt('core', 'Non-existing tag #{tag}', {\n\t\t\t\t\t\ttag: tag\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tvar $span = $('<span>');\n\t\t\t$span.append(escapeHTML(tag.name));\n\n\t\t\tvar scope;\n\t\t\tif (!tag.userAssignable) {\n\t\t\t\tscope = t('core', 'restricted');\n\t\t\t}\n\t\t\tif (!tag.userVisible) {\n\t\t\t\t// invisible also implicitly means not assignable\n\t\t\t\tscope = t('core', 'invisible');\n\t\t\t}\n\t\t\tif (scope) {\n\t\t\t\tvar $tag = $('<em>').text(' ' +\n\t\t\t\t\tt('core', '({scope})', {\n\t\t\t\t\t\tscope: scope\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t$span.append($tag);\n\t\t\t}\n\t\t\treturn $span;\n\t\t}\n\t};\n})(OC);\n\n","(function() {\n  var template = Handlebars.template, templates = OC.SystemTags.Templates = OC.SystemTags.Templates || {};\ntemplates['result'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" new-item\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"\t\t<span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.tagMarkup || (depth0 != null ? depth0.tagMarkup : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"tagMarkup\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span>\\n\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t<span class=\\\"label\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t<span class=\\\"systemtags-actions\\\">\\n\t\t\t<a href=\\\"#\\\" class=\\\"rename icon icon-rename\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.renameTooltip || (depth0 != null ? depth0.renameTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"renameTooltip\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></a>\\n\t\t</span>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, options, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", buffer = \n  \"<span class=\\\"systemtags-item\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isNew : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" data-id=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n<span class=\\\"checkmark icon icon-checkmark\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isAdmin : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.program(5, data, 0),\"data\":data})) != null ? stack1 : \"\");\n  stack1 = ((helper = (helper = helpers.allowActions || (depth0 != null ? depth0.allowActions : depth0)) != null ? helper : alias2),(options={\"name\":\"allowActions\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data}),(typeof helper === alias3 ? helper.call(alias1,options) : helper));\n  if (!helpers.allowActions) { stack1 = helpers.blockHelperMissing.call(depth0,stack1,options)}\n  if (stack1 != null) { buffer += stack1; }\n  return buffer + \"</span>\\n\";\n},\"useData\":true});\ntemplates['result_form'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t<a href=\\\"#\\\" class=\\\"delete icon icon-delete\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.deleteTooltip || (depth0 != null ? depth0.deleteTooltip : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"deleteTooltip\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></a>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<form class=\\\"systemtags-rename-form\\\">\\n\t <label class=\\\"hidden-visually\\\" for=\\\"\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"-rename-input\\\">\"\n    + alias4(((helper = (helper = helpers.renameLabel || (depth0 != null ? depth0.renameLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"renameLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</label>\\n\t<input id=\\\"\"\n    + alias4(((helper = (helper = helpers.cid || (depth0 != null ? depth0.cid : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"cid\",\"hash\":{},\"data\":data}) : helper)))\n    + \"-rename-input\\\" type=\\\"text\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isAdmin : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</form>\\n\";\n},\"useData\":true});\ntemplates['selection'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper;\n\n  return \"\t<span class=\\\"label\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.tagMarkup || (depth0 != null ? depth0.tagMarkup : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"tagMarkup\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</span>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t<span class=\\\"label\\\">\"\n    + container.escapeExpression(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.isAdmin : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"useData\":true});\n})();","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_FILEID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}id',\n\t\tPROPERTY_CAN_ASSIGN:'{' + OC.Files.Client.NS_OWNCLOUD + '}can-assign',\n\t\tPROPERTY_DISPLAYNAME:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}display-name',\n\t\tPROPERTY_USERVISIBLE:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}user-visible',\n\t\tPROPERTY_USERASSIGNABLE:'{' + OC.Files.Client.NS_OWNCLOUD + '}user-assignable',\n\t});\n\n\t/**\n\t * @class OCA.SystemTags.SystemTagsCollection\n\t * @classdesc\n\t *\n\t * System tag\n\t *\n\t */\n\tvar SystemTagModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.SystemTags.SystemTagModel.prototype */ {\n\t\tsync: OC.Backbone.davSync,\n\n\t\tdefaults: {\n\t\t\tuserVisible: true,\n\t\t\tuserAssignable: true,\n\t\t\tcanAssign: true\n\t\t},\n\n\t\tdavProperties: {\n\t\t\t'id':\tOC.Files.Client.PROPERTY_FILEID,\n\t\t\t'name': OC.Files.Client.PROPERTY_DISPLAYNAME,\n\t\t\t'userVisible': \tOC.Files.Client.PROPERTY_USERVISIBLE,\n\t\t\t'userAssignable': \tOC.Files.Client.PROPERTY_USERASSIGNABLE,\n\t\t\t// read-only, effective permissions computed by the server,\n\t\t\t'canAssign': OC.Files.Client.PROPERTY_CAN_ASSIGN\n\t\t},\n\n\t\tparse: function(data) {\n\t\t\treturn {\n\t\t\t\tid: data.id,\n\t\t\t\tname: data.name,\n\t\t\t\tuserVisible: data.userVisible === true || data.userVisible === 'true',\n\t\t\t\tuserAssignable: data.userAssignable === true || data.userAssignable === 'true',\n\t\t\t\tcanAssign: data.canAssign === true || data.canAssign === 'true'\n\t\t\t};\n\t\t}\n\t});\n\n\tOC.SystemTags = OC.SystemTags || {};\n\tOC.SystemTags.SystemTagModel = SystemTagModel;\n})(OC);\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC) {\n\t/**\n\t * @class OC.SystemTags.SystemTagsMappingCollection\n\t * @classdesc\n\t *\n\t * Collection of tags assigned to a an object\n\t *\n\t */\n\tvar SystemTagsMappingCollection = OC.Backbone.Collection.extend(\n\t\t/** @lends OC.SystemTags.SystemTagsMappingCollection.prototype */ {\n\n\t\tsync: OC.Backbone.davSync,\n\n\t\t/**\n\t\t * Use PUT instead of PROPPATCH\n\t\t */\n\t\tusePUT: true,\n\n\t\t/**\n\t\t * Id of the file for which to filter activities by\n\t\t *\n\t\t * @var int\n\t\t */\n\t\t_objectId: null,\n\n\t\t/**\n\t\t * Type of the object to filter by\n\t\t *\n\t\t * @var string\n\t\t */\n\t\t_objectType: 'files',\n\n\t\tmodel: OC.SystemTags.SystemTagModel,\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/systemtags-relations/' + this._objectType + '/' + this._objectId;\n\t\t},\n\n\t\t/**\n\t\t * Sets the object id to filter by or null for all.\n\t\t *\n\t\t * @param {int} objectId file id or null\n\t\t */\n\t\tsetObjectId: function(objectId) {\n\t\t\tthis._objectId = objectId;\n\t\t},\n\n\t\t/**\n\t\t * Sets the object type to filter by or null for all.\n\t\t *\n\t\t * @param {int} objectType file id or null\n\t\t */\n\t\tsetObjectType: function(objectType) {\n\t\t\tthis._objectType = objectType;\n\t\t},\n\n\t\tinitialize: function(models, options) {\n\t\t\toptions = options || {};\n\t\t\tif (!_.isUndefined(options.objectId)) {\n\t\t\t\tthis._objectId = options.objectId;\n\t\t\t}\n\t\t\tif (!_.isUndefined(options.objectType)) {\n\t\t\t\tthis._objectType = options.objectType;\n\t\t\t}\n\t\t},\n\n\t\tgetTagIds: function() {\n\t\t\treturn this.map(function(model) {\n\t\t\t\treturn model.id;\n\t\t\t});\n\t\t}\n\t});\n\n\tOC.SystemTags = OC.SystemTags || {};\n\tOC.SystemTags.SystemTagsMappingCollection = SystemTagsMappingCollection;\n})(OC);\n\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC) {\n\n\tfunction filterFunction(model, term) {\n\t\treturn model.get('name').substr(0, term.length).toLowerCase() === term.toLowerCase();\n\t}\n\n\t/**\n\t * @class OCA.SystemTags.SystemTagsCollection\n\t * @classdesc\n\t *\n\t * Collection of tags assigned to a file\n\t *\n\t */\n\tvar SystemTagsCollection = OC.Backbone.Collection.extend(\n\t\t/** @lends OC.SystemTags.SystemTagsCollection.prototype */ {\n\n\t\tsync: OC.Backbone.davSync,\n\n\t\tmodel: OC.SystemTags.SystemTagModel,\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/systemtags/';\n\t\t},\n\n\t\tfilterByName: function(name) {\n\t\t\treturn this.filter(function(model) {\n\t\t\t\treturn filterFunction(model, name);\n\t\t\t});\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis.fetched = false;\n\t\t\treturn OC.Backbone.Collection.prototype.reset.apply(this, arguments);\n\t\t},\n\n\t\t/**\n\t\t * Lazy fetch.\n\t\t * Only fetches once, subsequent calls will directly call the success handler.\n\t\t *\n\t\t * @param options\n\t\t * @param [options.force] true to force fetch even if cached entries exist\n\t\t *\n\t\t * @see Backbone.Collection#fetch\n\t\t */\n\t\tfetch: function(options) {\n\t\t\tvar self = this;\n\t\t\toptions = options || {};\n\t\t\tif (this.fetched || options.force) {\n\t\t\t\t// directly call handler\n\t\t\t\tif (options.success) {\n\t\t\t\t\toptions.success(this, null, options);\n\t\t\t\t}\n\t\t\t\t// trigger sync event\n\t\t\t\tthis.trigger('sync', this, null, options);\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\tvar success = options.success;\n\t\t\toptions = _.extend({}, options);\n\t\t\toptions.success = function() {\n\t\t\t\tself.fetched = true;\n\t\t\t\tif (success) {\n\t\t\t\t\treturn success.apply(this, arguments);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\treturn OC.Backbone.Collection.prototype.fetch.call(this, options);\n\t\t}\n\t});\n\n\tOC.SystemTags = OC.SystemTags || {};\n\tOC.SystemTags.SystemTagsCollection = SystemTagsCollection;\n\n\t/**\n\t * @type OC.SystemTags.SystemTagsCollection\n\t */\n\tOC.SystemTags.collection = new OC.SystemTags.SystemTagsCollection();\n})(OC);\n\n","/*\n * Copyright (c) 2015\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n\n(function(OC) {\n\n\t/**\n\t * @class OC.SystemTags.SystemTagsInputField\n\t * @classdesc\n\t *\n\t * Displays a file's system tags\n\t *\n\t */\n\tvar SystemTagsInputField = OC.Backbone.View.extend(\n\t\t/** @lends OC.SystemTags.SystemTagsInputField.prototype */ {\n\n\t\t_rendered: false,\n\n\t\t_newTag: null,\n\n\t\t_lastUsedTags: [],\n\n\t\tclassName: 'systemTagsInputFieldContainer',\n\n\t\ttemplate: function(data) {\n\t\t\treturn '<input class=\"systemTagsInputField\" type=\"hidden\" name=\"tags\" value=\"\"/>';\n\t\t},\n\n\t\t/**\n\t\t * Creates a new SystemTagsInputField\n\t\t *\n\t\t * @param {Object} [options]\n\t\t * @param {string} [options.objectType=files] object type for which tags are assigned to\n\t\t * @param {bool} [options.multiple=false] whether to allow selecting multiple tags\n\t\t * @param {bool} [options.allowActions=true] whether tags can be renamed/delete within the dropdown\n\t\t * @param {bool} [options.allowCreate=true] whether new tags can be created\n\t\t * @param {bool} [options.isAdmin=true] whether the user is an administrator\n\t\t * @param {Function} options.initSelection function to convert selection to data\n\t\t */\n\t\tinitialize: function(options) {\n\t\t\toptions = options || {};\n\n\t\t\tthis._multiple = !!options.multiple;\n\t\t\tthis._allowActions = _.isUndefined(options.allowActions) || !!options.allowActions;\n\t\t\tthis._allowCreate = _.isUndefined(options.allowCreate) || !!options.allowCreate;\n\t\t\tthis._isAdmin = !!options.isAdmin;\n\n\t\t\tif (_.isFunction(options.initSelection)) {\n\t\t\t\tthis._initSelection = options.initSelection;\n\t\t\t}\n\n\t\t\tthis.collection = options.collection || OC.SystemTags.collection;\n\n\t\t\tvar self = this;\n\t\t\tthis.collection.on('change:name remove', function() {\n\t\t\t\t// refresh selection\n\t\t\t\t_.defer(self._refreshSelection);\n\t\t\t});\n\n\t\t\t_.defer(_.bind(this._getLastUsedTags, this));\n\n\t\t\t_.bindAll(\n\t\t\t\tthis,\n\t\t\t\t'_refreshSelection',\n\t\t\t\t'_onClickRenameTag',\n\t\t\t\t'_onClickDeleteTag',\n\t\t\t\t'_onSelectTag',\n\t\t\t\t'_onDeselectTag',\n\t\t\t\t'_onSubmitRenameTag'\n\t\t\t);\n\t\t},\n\n\t\t_getLastUsedTags: function() {\n\t\t\tvar self = this;\n\t\t\t$.ajax({\n\t\t\t\ttype: 'GET',\n\t\t\t\turl: OC.generateUrl('/apps/systemtags/lastused'),\n\t\t\t\tsuccess: function (response) {\n\t\t\t\t\tself._lastUsedTags = response;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Refreshes the selection, triggering a call to\n\t\t * select2's initSelection\n\t\t */\n\t\t_refreshSelection: function() {\n\t\t\tthis.$tagsField.select2('val', this.$tagsField.val());\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever the user clicked the \"rename\" action.\n\t\t * This will display the rename field.\n\t\t */\n\t\t_onClickRenameTag: function(ev) {\n\t\t\tvar $item = $(ev.target).closest('.systemtags-item');\n\t\t\tvar tagId = $item.attr('data-id');\n\t\t\tvar tagModel = this.collection.get(tagId);\n\n\t\t\tvar oldName = tagModel.get('name');\n\t\t\tvar $renameForm = $(OC.SystemTags.Templates['result_form']({\n\t\t\t\tcid: this.cid,\n\t\t\t\tname: oldName,\n\t\t\t\tdeleteTooltip: t('core', 'Delete'),\n\t\t\t\trenameLabel: t('core', 'Rename'),\n\t\t\t\tisAdmin: this._isAdmin\n\t\t\t}));\n\t\t\t$item.find('.label').after($renameForm);\n\t\t\t$item.find('.label, .systemtags-actions').addClass('hidden');\n\t\t\t$item.closest('.select2-result').addClass('has-form');\n\n\t\t\t$renameForm.find('[title]').tooltip({\n\t\t\t\tplacement: 'bottom',\n\t\t\t\tcontainer: 'body'\n\t\t\t});\n\t\t\t$renameForm.find('input').focus().selectRange(0, oldName.length);\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever the rename form has been submitted after\n\t\t * the user entered a new tag name.\n\t\t * This will submit the change to the server. \n\t\t *\n\t\t * @param {Object} ev event\n\t\t */\n\t\t_onSubmitRenameTag: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $form = $(ev.target);\n\t\t\tvar $item = $form.closest('.systemtags-item');\n\t\t\tvar tagId = $item.attr('data-id');\n\t\t\tvar tagModel = this.collection.get(tagId);\n\t\t\tvar newName = $(ev.target).find('input').val().trim();\n\t\t\tif (newName && newName !== tagModel.get('name')) {\n\t\t\t\ttagModel.save({'name': newName});\n\t\t\t\t// TODO: spinner, and only change text after finished saving\n\t\t\t\t$item.find('.label').text(newName);\n\t\t\t}\n\t\t\t$item.find('.label, .systemtags-actions').removeClass('hidden');\n\t\t\t$form.remove();\n\t\t\t$item.closest('.select2-result').removeClass('has-form');\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever a tag must be deleted\n\t\t *\n\t\t * @param {Object} ev event\n\t\t */\n\t\t_onClickDeleteTag: function(ev) {\n\t\t\tvar $item = $(ev.target).closest('.systemtags-item');\n\t\t\tvar tagId = $item.attr('data-id');\n\t\t\tthis.collection.get(tagId).destroy();\n\t\t\t$(ev.target).tooltip('hide');\n\t\t\t$item.closest('.select2-result').remove();\n\t\t\t// TODO: spinner\n\t\t\treturn false;\n\t\t},\n\n\t\t_addToSelect2Selection: function(selection) {\n\t\t\tvar data = this.$tagsField.select2('data');\n\t\t\tdata.push(selection);\n\t\t\tthis.$tagsField.select2('data', data);\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever a tag is selected.\n\t\t * Also called whenever tag creation is requested through the dummy tag object.\n\t\t *\n\t\t * @param {Object} e event\n\t\t */\n\t\t_onSelectTag: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar tag;\n\t\t\tif (e.object && e.object.isNew) {\n\t\t\t\t// newly created tag, check if existing\n\t\t\t\t// create a new tag\n\t\t\t\ttag = this.collection.create({\n\t\t\t\t\tname: e.object.name.trim(),\n\t\t\t\t\tuserVisible: true,\n\t\t\t\t\tuserAssignable: true,\n\t\t\t\t\tcanAssign: true\n\t\t\t\t}, {\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tself._addToSelect2Selection(model.toJSON());\n\t\t\t\t\t\tself._lastUsedTags.unshift(model.id);\n\t\t\t\t\t\tself.trigger('select', model);\n\t\t\t\t\t},\n\t\t\t\t\terror: function(model, xhr) {\n\t\t\t\t\t\tif (xhr.status === 409) {\n\t\t\t\t\t\t\t// re-fetch collection to get the missing tag\n\t\t\t\t\t\t\tself.collection.reset();\n\t\t\t\t\t\t\tself.collection.fetch({\n\t\t\t\t\t\t\t\tsuccess: function(collection) {\n\t\t\t\t\t\t\t\t\t// find the tag in the collection\n\t\t\t\t\t\t\t\t\tvar model = collection.where({\n\t\t\t\t\t\t\t\t\t\tname: e.object.name.trim(),\n\t\t\t\t\t\t\t\t\t\tuserVisible: true,\n\t\t\t\t\t\t\t\t\t\tuserAssignable: true\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tif (model.length) {\n\t\t\t\t\t\t\t\t\t\tmodel = model[0];\n\t\t\t\t\t\t\t\t\t\t// the tag already exists or was already assigned,\n\t\t\t\t\t\t\t\t\t\t// add it to the list anyway\n\t\t\t\t\t\t\t\t\t\tself._addToSelect2Selection(model.toJSON());\n\t\t\t\t\t\t\t\t\t\tself.trigger('select', model);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.$tagsField.select2('close');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\ttag = this.collection.get(e.object.id);\n\t\t\t\tthis._lastUsedTags.unshift(tag.id);\n\t\t\t}\n\t\t\tthis._newTag = null;\n\t\t\tthis.trigger('select', tag);\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever a tag gets deselected.\n\t\t *\n\t\t * @param {Object} e event\n\t\t */\n\t\t_onDeselectTag: function(e) {\n\t\t\tthis.trigger('deselect', e.choice.id);\n\t\t},\n\n\t\t/**\n\t\t * Autocomplete function for dropdown results\n\t\t *\n\t\t * @param {Object} query select2 query object\n\t\t */\n\t\t_queryTagsAutocomplete: function(query) {\n\t\t\tvar self = this;\n\t\t\tthis.collection.fetch({\n\t\t\t\tsuccess: function(collection) {\n\t\t\t\t\tvar tagModels = collection.filterByName(query.term.trim());\n\t\t\t\t\tif (!self._isAdmin) {\n\t\t\t\t\t\ttagModels = _.filter(tagModels, function(tagModel) {\n\t\t\t\t\t\t\treturn tagModel.get('canAssign');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tquery.callback({\n\t\t\t\t\t\tresults: _.invoke(tagModels, 'toJSON')\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_preventDefault: function(e) {\n\t\t\te.stopPropagation();\n\t\t},\n\n\t\t/**\n\t\t * Formats a single dropdown result\n\t\t *\n\t\t * @param {Object} data data to format\n\t\t * @return {string} HTML markup\n\t\t */\n\t\t_formatDropDownResult: function(data) {\n\t\t\treturn OC.SystemTags.Templates['result'](_.extend({\n\t\t\t\trenameTooltip: t('core', 'Rename'),\n\t\t\t\tallowActions: this._allowActions,\n\t\t\t\ttagMarkup: this._isAdmin ? OC.SystemTags.getDescriptiveTag(data)[0].innerHTML : null,\n\t\t\t\tisAdmin: this._isAdmin\n\t\t\t}, data));\n\t\t},\n\n\t\t/**\n\t\t * Formats a single selection item\n\t\t *\n\t\t * @param {Object} data data to format\n\t\t * @return {string} HTML markup\n\t\t */\n\t\t_formatSelection: function(data) {\n\t\t\treturn OC.SystemTags.Templates['selection'](_.extend({\n\t\t\t\ttagMarkup: this._isAdmin ? OC.SystemTags.getDescriptiveTag(data)[0].innerHTML : null,\n\t\t\t\tisAdmin: this._isAdmin\n\t\t\t}, data));\n\t\t},\n\n\t\t/**\n\t\t * Create new dummy choice for select2 when the user\n\t\t * types an arbitrary string\n\t\t *\n\t\t * @param {string} term entered term\n\t\t * @return {Object} dummy tag\n\t\t */\n\t\t_createSearchChoice: function(term) {\n\t\t\tterm = term.trim();\n\t\t\tif (this.collection.filter(function(entry) {\n\t\t\t\t\treturn entry.get('name') === term;\n\t\t\t\t}).length) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this._newTag) {\n\t\t\t\tthis._newTag = {\n\t\t\t\t\tid: -1,\n\t\t\t\t\tname: term,\n\t\t\t\t\tuserAssignable: true,\n\t\t\t\t\tuserVisible: true,\n\t\t\t\t\tcanAssign: true,\n\t\t\t\t\tisNew: true\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tthis._newTag.name = term;\n\t\t\t}\n\n\t\t\treturn this._newTag;\n\t\t},\n\n\t\t_initSelection: function(element, callback) {\n\t\t\tvar self = this;\n\t\t\tvar ids = $(element).val().split(',');\n\n\t\t\tfunction modelToSelection(model) {\n\t\t\t\tvar data = model.toJSON();\n\t\t\t\tif (!self._isAdmin && !data.canAssign) {\n\t\t\t\t\t// lock static tags for non-admins\n\t\t\t\t\tdata.locked = true;\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t}\n\n\t\t\tfunction findSelectedObjects(ids) {\n\t\t\t\tvar selectedModels = self.collection.filter(function(model) {\n\t\t\t\t\treturn ids.indexOf(model.id) >= 0 && (self._isAdmin || model.get('userVisible'));\n\t\t\t\t});\n\t\t\t\treturn _.map(selectedModels, modelToSelection);\n\t\t\t}\n\n\t\t\tthis.collection.fetch({\n\t\t\t\tsuccess: function() {\n\t\t\t\t\tcallback(findSelectedObjects(ids));\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Renders this details view\n\t\t */\n\t\trender: function() {\n\t\t\tvar self = this;\n\t\t\tthis.$el.html(this.template());\n\n\t\t\tthis.$el.find('[title]').tooltip({placement: 'bottom'});\n\t\t\tthis.$tagsField = this.$el.find('[name=tags]');\n\t\t\tthis.$tagsField.select2({\n\t\t\t\tplaceholder: t('core', 'Collaborative tags'),\n\t\t\t\tcontainerCssClass: 'systemtags-select2-container',\n\t\t\t\tdropdownCssClass: 'systemtags-select2-dropdown',\n\t\t\t\tcloseOnSelect: false,\n\t\t\t\tallowClear: false,\n\t\t\t\tmultiple: this._multiple,\n\t\t\t\ttoggleSelect: this._multiple,\n\t\t\t\tquery: _.bind(this._queryTagsAutocomplete, this),\n\t\t\t\tid: function(tag) {\n\t\t\t\t\treturn tag.id;\n\t\t\t\t},\n\t\t\t\tinitSelection: _.bind(this._initSelection, this),\n\t\t\t\tformatResult: _.bind(this._formatDropDownResult, this),\n\t\t\t\tformatSelection: _.bind(this._formatSelection, this),\n\t\t\t\tcreateSearchChoice: this._allowCreate ? _.bind(this._createSearchChoice, this) : undefined,\n\t\t\t\tsortResults: function(results) {\n\t\t\t\t\tvar selectedItems = _.pluck(self.$tagsField.select2('data'), 'id');\n\t\t\t\t\tresults.sort(function(a, b) {\n\t\t\t\t\t\tvar aSelected = selectedItems.indexOf(a.id) >= 0;\n\t\t\t\t\t\tvar bSelected = selectedItems.indexOf(b.id) >= 0;\n\t\t\t\t\t\tif (aSelected === bSelected) {\n\t\t\t\t\t\t\tvar aLastUsed = self._lastUsedTags.indexOf(a.id);\n\t\t\t\t\t\t\tvar bLastUsed = self._lastUsedTags.indexOf(b.id);\n\n\t\t\t\t\t\t\tif (aLastUsed !== bLastUsed) {\n\t\t\t\t\t\t\t\tif (bLastUsed === -1) {\n\t\t\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (aLastUsed === -1) {\n\t\t\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn aLastUsed < bLastUsed ? -1 : 1;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// Both not found\n\t\t\t\t\t\t\treturn OC.Util.naturalSortCompare(a.name, b.name);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (aSelected && !bSelected) {\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t});\n\t\t\t\t\treturn results;\n\t\t\t\t},\n\t\t\t\tformatNoMatches: function() {\n\t\t\t\t\treturn t('core', 'No tags found');\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.on('select2-selecting', this._onSelectTag)\n\t\t\t\t.on('select2-removing', this._onDeselectTag);\n\n\t\t\tvar $dropDown = this.$tagsField.select2('dropdown');\n\t\t\t// register events for inside the dropdown\n\t\t\t$dropDown.on('mouseup', '.rename', this._onClickRenameTag);\n\t\t\t$dropDown.on('mouseup', '.delete', this._onClickDeleteTag);\n\t\t\t$dropDown.on('mouseup', '.select2-result-selectable.has-form', this._preventDefault);\n\t\t\t$dropDown.on('submit', '.systemtags-rename-form', this._onSubmitRenameTag);\n\n\t\t\tthis.delegateEvents();\n\t\t},\n\n\t\tremove: function() {\n\t\t\tif (this.$tagsField) {\n\t\t\t\tthis.$tagsField.select2('destroy');\n\t\t\t}\n\t\t},\n\n\t\tgetValues: function() {\n\t\t\tthis.$tagsField.select2('val');\n\t\t},\n\n\t\tsetValues: function(values) {\n\t\t\tthis.$tagsField.select2('val', values);\n\t\t},\n\n\t\tsetData: function(data) {\n\t\t\tthis.$tagsField.select2('data', data);\n\t\t}\n\t});\n\n\tOC.SystemTags = OC.SystemTags || {};\n\tOC.SystemTags.SystemTagsInputField = SystemTagsInputField;\n\n})(OC);\n\n","\nvar content = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/lib/loader.js!./systemtags.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/lib/loader.js!./systemtags.scss\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/dist/cjs.js!../../node_modules/sass-loader/lib/loader.js!./systemtags.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"@charset \\\"UTF-8\\\";\\n/**\\n * @copyright Copyright (c) 2016, John Molakvoæ <skjnldsv@protonmail.com>\\n * @copyright Copyright (c) 2016, Robin Appelman <robin@icewind.nl>\\n * @copyright Copyright (c) 2016, Jan-Christoph Borchardt <hey@jancborchardt.net>\\n * @copyright Copyright (c) 2016, Vincent Petry <pvince81@owncloud.com>\\n * @copyright Copyright (c) 2016, Erik Pellikka <erik@pellikka.org>\\n * @copyright Copyright (c) 2015, Vincent Petry <pvince81@owncloud.com>\\n *\\n * @license GNU AGPL version 3 or any later version\\n *\\n */\\n.systemtags-select2-dropdown .select2-result-label .checkmark {\\n  visibility: hidden;\\n  margin-left: -5px;\\n  margin-right: 5px;\\n  padding: 4px; }\\n\\n.systemtags-select2-dropdown .select2-result-label .new-item .systemtags-actions {\\n  display: none; }\\n\\n.systemtags-select2-dropdown .select2-selected .select2-result-label .checkmark {\\n  visibility: visible; }\\n\\n.systemtags-select2-dropdown .select2-result-label .icon {\\n  display: inline-block;\\n  opacity: .5; }\\n  .systemtags-select2-dropdown .select2-result-label .icon.rename {\\n    padding: 4px; }\\n\\n.systemtags-select2-dropdown .systemtags-actions {\\n  position: absolute;\\n  right: 5px; }\\n\\n.systemtags-select2-dropdown .systemtags-rename-form {\\n  display: inline-block;\\n  width: calc(100% - 20px);\\n  top: -6px;\\n  position: relative; }\\n  .systemtags-select2-dropdown .systemtags-rename-form input {\\n    display: inline-block;\\n    height: 30px;\\n    width: calc(100% - 40px); }\\n\\n.systemtags-select2-dropdown .label {\\n  width: 85%;\\n  display: inline-block;\\n  overflow: hidden;\\n  text-overflow: ellipsis; }\\n  .systemtags-select2-dropdown .label.hidden {\\n    display: none; }\\n\\n.systemtags-select2-dropdown span {\\n  line-height: 25px; }\\n\\n.systemtags-select2-dropdown .systemtags-item {\\n  display: inline-block;\\n  height: 25px;\\n  width: 100%; }\\n\\n.systemtags-select2-dropdown .select2-result-label {\\n  height: 25px; }\\n\\n.systemtags-select2-container {\\n  width: 100%; }\\n  .systemtags-select2-container .select2-choices .select2-search-choice.select2-locked .label {\\n    opacity: 0.5; }\\n\\n#select2-drop.systemtags-select2-dropdown .select2-results li.select2-result {\\n  padding: 5px; }\\n\", \"\"]);\n\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n"],"sourceRoot":""}