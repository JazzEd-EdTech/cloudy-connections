{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///external \"jQuery\"","webpack:///./node_modules/css-loader/dist/runtime/api.js","webpack:///./node_modules/style-loader/lib/addStyles.js","webpack:///./apps/comments/src/comments.js","webpack:///./apps/comments/src/app.js","webpack:///./apps/comments/src/templates.js","webpack:///./apps/comments/src/commentmodel.js","webpack:///./apps/comments/src/commentcollection.js","webpack:///./apps/comments/src/commentsummarymodel.js","webpack:///./apps/comments/src/commentstabview.js","webpack:///./apps/comments/src/commentsmodifymenu.js","webpack:///./apps/comments/src/filesplugin.js","webpack:///./apps/comments/src/activitytabviewplugin.js","webpack:///./apps/comments/src/search.js","webpack:///./apps/comments/src/vendor/Caret.js/dist/jquery.caret.min.js","webpack:///./apps/comments/src/vendor/At.js/dist/js/jquery.atwho.min.js","webpack:///./apps/comments/src/style/autocomplete.scss?dc09","webpack:///./apps/comments/src/style/autocomplete.scss","webpack:///./node_modules/style-loader/lib/urls.js","webpack:///./apps/comments/src/style/comments.scss?1960","webpack:///./apps/comments/src/style/comments.scss"],"names":["enumerable","get","getter","value","key","bind","module","Object","prototype","hasOwnProperty","call","object","property","exports","jQuery","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","i","modules","mediaQuery","alreadyImportedModules","length","id","push","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","options","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","undefined","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","transform","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","OCA","Comments","template","templates","Handlebars","Templates","container","depth0","helpers","partials","data","helper","escapeExpression","actorId","helperMissing","nullContext","stack1","alias1","alias2","alias3","alias4","isUnread","program","noop","isLong","isUserAuthor","actorDisplayName","timestamp","altDate","date","formattedMessage","name","iconClass","displayName","each","items","cancelText","tag","isEditMode","newMessagePlaceholder","message","submitText","countMessage","iconUrl","emptyResultLabel","moreLabel","OC","_","extend","Files","Client","PROPERTY_FILEID","NS_OWNCLOUD","PROPERTY_MESSAGE","PROPERTY_ACTORTYPE","PROPERTY_ACTORID","PROPERTY_ISUNREAD","PROPERTY_OBJECTID","PROPERTY_OBJECTTYPE","PROPERTY_ACTORDISPLAYNAME","PROPERTY_CREATIONDATETIME","PROPERTY_MENTIONS","CommentModel","Backbone","Model","sync","davSync","defaults","actorType","objectType","davProperties","parse","creationDateTime","objectId","mentions","_parseMentions","isUndefined","mention","localName","child","startsWith","textContent","CommentCollection","Collection","model","_objectType","_objectId","_endReached","_limit","initialize","models","url","linkToRemote","setObjectId","hasMoreResults","reset","_summaryModel","fetchNext","self","body","success","resp","initial","set","trigger","getSummaryModel","CommentSummaryModel","updateReadMarker","save","readMarker","Date","toUTCString","PROPERTY_READMARKER","CommentsTabView","DetailTabView","className","_autoCompleteData","_commentsModifyMenu","events","_commentMaxLength","collection","on","_onRequest","_onEndRequest","_onAddModel","_onChangeModel","_commentMaxThreshold","bindAll","params","currentUser","getCurrentUser","uid","editCommentTemplate","t","commentTemplate","editTooltip","_isLong","getLabel","getIcon","setFileInfo","fileInfo","render","_initAutoComplete","$","find","silent","nextPage","$el","html","tooltip","$container","avatar","delegateEvents","_onTypeComment","autosize","focus","$target","s","limit","appConfig","comments","maxAutoCompleteResults","atwho","at","callbacks","remoteFilter","_onAutoComplete","highlighter","li","$li","sorter","q","displayTpl","escapeHTML","label","insertTpl","searchKey","je","_postRenderItem","query","callback","_autoCompleteRequestTimer","clearTimeout","delay","_autoCompleteRequestCall","abort","ajax","linkToOCS","search","itemType","itemId","beforeSend","request","setRequestHeader","ocs","_formatItem","commentModel","getTime","Util","relativeModifiedDate","formatDate","_formatMessage","attributes","_toggleLoading","state","_loading","toggleClass","addClass","fileInfoModel","findWhere","$comment","eq","append","text","prop","oldMentions","fetch","isEqual","$updated","trim","previous","$row","closest","removeClass","$message","editionMode","inlineAvatars","context","hasClass","$this","attr","username","oc_current_user","contactsMenu","modifyCommentMenu","CommentsModifyMenu","show","listenTo","ev","action","_onClickEditComment","_onClickDeleteComment","_postRenderMessage","user","editMode","replace","mentionId","escape","regex","RegExp","_composeHTMLMention","mentionDisplayName","match","p1","OCP","plainToRich","preventDefault","commentId","commentToEdit","$formRow","after","replaceWith","clone","$field","len","$submitButton","count","max","limitExceeded","keyCode","shiftKey","click","_onClickComment","is","_onClickCloseComment","$loading","$moreIcon","destroy","error","Notification","showTemporary","_onClickShowMore","_onSubmitSuccess","$form","$submit","_commentBodyHTML2Plain","oldHtml","$inserted","userId","richToPlain","_onSubmitComment","$commentField","_onSubmitError","create","verb","wait","_onTextChange","empty","_onPaste","originalEvent","clipboardData","getData","execCommand","View","tagName","_scopes","_onClickAction","event","currentTarget","hideMenus","_context","active","offsetIcon","offset","offsetContainer","position","top","left","right","width","showMenu","PROPERTY_COMMENTS_UNREAD","FilesPlugin","ignoreLists","_formatCommentCount","n","imagePath","attach","fileList","registerTabView","oldGetWebdavProperties","_getWebdavProperties","props","filesClient","addFileInfoParser","response","commentsUnread","propStat","properties","parseInt","oldCreateRow","_createRow","fileData","$tr","fileActions","registerAction","$file","unread","mime","order","permissions","PERMISSION_READ","FileActions","TYPE_INLINE","actionSpec","isDefault","unreadComments","$actionLink","actionHandler","fileName","showDetailsView","oldElementToFile","elementToFile","Plugins","register","ActivityTabViewPlugin","prepareModelForDisplay","view","$overlay","_onClickCollapsedComment","Comment","fileAppLoaded","App","renderCommentResult","$nofilterresults","updateLegacyMimetype","$pathDiv","path","$avatar","authorName","authorId","comment","prepend","dir","dirname","generateUrl","scrollto","handleCommentClick","changeDirectory","scrollTo","mime_type","setFileList","setRenderer","setHandler","Search","a","define","c","returnExportsGlobal","b","d","g","h","l","$inputor","domInputor","setPos","getIEPosition","getPosition","getOffset","getOldIEPos","selection","createRange","createTextRange","moveToElementText","setEndPoint","getPos","range","cloneRange","selectNodeContents","setEnd","endContainer","endOffset","detach","getOldIEOffset","duplicate","moveStart","height","getBoundingClientRect","bottom","f","getSelection","setStart","insertNode","selectNode","scrollTop","scrollLeft","rangeCount","getRangeAt","getIEPos","parentElement","moveToBookmark","getBookmark","collapse","compareEndPoints","selectionStart","move","select","setSelectionRange","getIEOffset","boundingLeft","boundingTop","boundingHeight","test","navigator","userAgent","val","slice","rect","css_attr","mirrorCss","zIndex","$mirror","contentEditable","pos","iframe","contentWindow","caret","isPlainObject","EditableCaret","InputCaret","Utils","apis","ESC","TAB","ENTER","CTRL","A","P","N","LEFT","UP","RIGHT","DOWN","BACKSPACE","SPACE","beforeSave","r","arrayToDefaultHash","matcher","o","decodeURI","exec","String","toLowerCase","atwho_order","sort","tplEval","beforeInsert","beforeReposition","afterMatchFailed","currentFlag","controllers","aliasMaps","setupRootElement","listen","createContainer","ownerDocument","defaultView","parentWindow","frameElement","debug","iframeAsRoot","controller","setContextFor","reg","alias","init","hide","isComposing","setTimeout","dispatch","onKeyup","onKeydown","expectedQueryCBId","getOpt","shutdown","off","lookUp","ctrlKey","visible","prev","next","highlighted","choose","app","setting","u","Math","random","substr","reload","callDefault","insertContentFor","renderView","isArray","catchQuery","_delayLookUp","_lookUp","now","previousCallTime","_stopDelayedCall","delayedCallTimeout","_generateQueryCBId","constructor","proxy","p","__super__","headPos","endPos","insert","change","_getRange","_setRange","setEndAfter","setStartAfter","setEndBefore","setStartBefore","_clearRange","ctrl_a_pressed","removeAllRanges","addRange","_movingEvent","which","_unwrap","unwrap","nodeValue","collapsed","startContainer","contents","last","nodeType","ELEMENT_NODE","startOffset","cloneContents","TEXT_NODE","previousSibling","siblings","surroundContents","first","getClientRects","storage","saved","load","_load","dataType","done","$elUl","children","timeoutID","bindEvent","charCodeAt","clientX","clientY","expr","filters","stopShowing","reposition","offsetTop","offsetHeight","animate","isNaN","isSelecting","setIframe","run","Array","headerTpl","functionOverrides","suffix","hideWithoutSuffix","startWithSpace","acceptSpaceBar","highlightFirst","maxLen","minLen","displayTimeout","spaceSelectsMatch","tabSelectsMatch","editableAtwhoQueryAttrs","scrollDuration","suspendOnComposing","lookUpOnClick","locals","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","$1"],"mappings":"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","file":"comments.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/js/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","module.exports = jQuery;","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return '@media ' + item[2] + '{' + content + '}';\n      } else {\n        return content;\n      }\n    }).join('');\n  }; // import a list of modules into the list\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (i = 0; i < modules.length; i++) {\n      var item = modules[i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = '(' + item[2] + ') and (' + mediaQuery + ')';\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || '';\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */';\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n  return '/*# ' + data + ' */';\n}","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","import './app'\nimport './templates'\nimport './commentmodel'\nimport './commentcollection'\nimport './commentsummarymodel'\nimport './commentstabview'\nimport './commentsmodifymenu'\nimport './filesplugin'\nimport './activitytabviewplugin'\nimport './search'\n\nimport './vendor/Caret.js/dist/jquery.caret.min'\nimport './vendor/At.js/dist/js/jquery.atwho.min'\n\nimport './style/autocomplete.scss'\nimport './style/comments.scss'\n\nwindow.OCA.Comments = OCA.Comments;\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function() {\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {};\n\t}\n\n})();\n\n","(function() {\n  var template = Handlebars.template, templates = OCA.Comments.Templates = OCA.Comments.Templates || {};\ntemplates['comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    return \" unread\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    return \" collapsed\";\n},\"5\":function(container,depth0,helpers,partials,data) {\n    return \" currentUser\";\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"data-username=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t<a href=\\\"#\\\" class=\\\"action more icon icon-more has-tooltip\\\"></a>\\n\t\t\t<div class=\\\"deleteLoading icon-loading-small hidden\\\"></div>\\n\";\n},\"11\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t<div class=\\\"message-overlay\\\"></div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<li class=\\\"comment\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUnread : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\" \"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.actorId : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"> </div>\\n\t\t<div class=\\\"author\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(5, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isUserAuthor : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(9, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t<div class=\\\"date has-tooltip live-relative-timestamp\\\" data-timestamp=\\\"\"\n    + alias4(((helper = (helper = helpers.timestamp || (depth0 != null ? depth0.timestamp : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"timestamp\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.altDate || (depth0 != null ? depth0.altDate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"altDate\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.date || (depth0 != null ? depth0.date : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"date\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t</div>\\n\t<div class=\\\"message\\\">\"\n    + ((stack1 = ((helper = (helper = helpers.formattedMessage || (depth0 != null ? depth0.formattedMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"formattedMessage\",\"hash\":{},\"data\":data}) : helper))) != null ? stack1 : \"\")\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isLong : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(11, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"useData\":true});\ntemplates['commentsmodifymenu'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t\t<li>\\n\t\t\t<a href=\\\"#\\\" class=\\\"menuitem action \"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \" permanent\\\" data-action=\\\"\"\n    + alias4(((helper = (helper = helpers.name || (depth0 != null ? depth0.name : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"name\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.iconClass : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(2, data, 0),\"inverse\":container.program(4, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"\t\t\t\t<span>\"\n    + alias4(((helper = (helper = helpers.displayName || (depth0 != null ? depth0.displayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"displayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t\t\t</a>\\n\t\t</li>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t\t\t<span class=\\\"icon \"\n    + container.escapeExpression(((helper = (helper = helpers.iconClass || (depth0 != null ? depth0.iconClass : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"iconClass\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></span>\\n\";\n},\"4\":function(container,depth0,helpers,partials,data) {\n    return \"\t\t\t\t\t<span class=\\\"no-icon\\\"></span>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<ul>\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\";\n},\"useData\":true});\ntemplates['edit_comment'] = template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper;\n\n  return \"\t\t\t<div class=\\\"action-container\\\">\\n\t\t\t\t<a href=\\\"#\\\" class=\\\"action cancel icon icon-close has-tooltip\\\" title=\\\"\"\n    + container.escapeExpression(((helper = (helper = helpers.cancelText || (depth0 != null ? depth0.cancelText : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"cancelText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></a>\\n\t\t\t</div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \" class=\\\"newCommentRow comment\\\" data-id=\\\"\"\n    + alias4(((helper = (helper = helpers.id || (depth0 != null ? depth0.id : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t<div class=\\\"authorRow\\\">\\n\t\t<div class=\\\"avatar currentUser\\\" data-username=\\\"\"\n    + alias4(((helper = (helper = helpers.actorId || (depth0 != null ? depth0.actorId : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorId\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"></div>\\n\t\t<div class=\\\"author currentUser\\\">\"\n    + alias4(((helper = (helper = helpers.actorDisplayName || (depth0 != null ? depth0.actorDisplayName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"actorDisplayName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\"\n    + ((stack1 = helpers[\"if\"].call(alias1,(depth0 != null ? depth0.isEditMode : depth0),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"\t</div>\\n\t<form class=\\\"newCommentForm\\\">\\n\t\t<div contentEditable=\\\"true\\\" class=\\\"message\\\" data-placeholder=\\\"\"\n    + alias4(((helper = (helper = helpers.newMessagePlaceholder || (depth0 != null ? depth0.newMessagePlaceholder : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"newMessagePlaceholder\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\"\n    + alias4(((helper = (helper = helpers.message || (depth0 != null ? depth0.message : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"message\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</div>\\n\t\t<input class=\\\"submit icon-confirm has-tooltip\\\" type=\\\"submit\\\" value=\\\"\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.submitText || (depth0 != null ? depth0.submitText : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"submitText\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n\t\t<div class=\\\"submitLoading icon-loading-small hidden\\\"></div>\\n\t</form>\\n</\"\n    + alias4(((helper = (helper = helpers.tag || (depth0 != null ? depth0.tag : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tag\",\"hash\":{},\"data\":data}) : helper)))\n    + \">\\n\";\n},\"useData\":true});\ntemplates['filesplugin'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<a class=\\\"action action-comment permanent\\\" title=\\\"\"\n    + alias4(((helper = (helper = helpers.countMessage || (depth0 != null ? depth0.countMessage : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"countMessage\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" href=\\\"#\\\">\\n\t<img class=\\\"svg\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.iconUrl || (depth0 != null ? depth0.iconUrl : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"iconUrl\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\"/>\\n</a>\\n\";\n},\"useData\":true});\ntemplates['view'] = template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<ul class=\\\"comments\\\">\\n</ul>\\n<div class=\\\"emptycontent hidden\\\"><div class=\\\"icon-comment\\\"></div>\\n\t<p>\"\n    + alias4(((helper = (helper = helpers.emptyResultLabel || (depth0 != null ? depth0.emptyResultLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"emptyResultLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</p></div>\\n<input type=\\\"button\\\" class=\\\"showMore hidden\\\" value=\\\"\"\n    + alias4(((helper = (helper = helpers.moreLabel || (depth0 != null ? depth0.moreLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"moreLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" name=\\\"show-more\\\" id=\\\"show-more\\\" />\\n<div class=\\\"loading hidden\\\" style=\\\"height: 50px\\\"></div>\\n\";\n},\"useData\":true});\n})();","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_FILEID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}id',\n\t\tPROPERTY_MESSAGE: \t'{' + OC.Files.Client.NS_OWNCLOUD + '}message',\n\t\tPROPERTY_ACTORTYPE:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorType',\n\t\tPROPERTY_ACTORID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorId',\n\t\tPROPERTY_ISUNREAD:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}isUnread',\n\t\tPROPERTY_OBJECTID:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}objectId',\n\t\tPROPERTY_OBJECTTYPE:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}objectType',\n\t\tPROPERTY_ACTORDISPLAYNAME:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}actorDisplayName',\n\t\tPROPERTY_CREATIONDATETIME:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}creationDateTime',\n\t\tPROPERTY_MENTIONS: '{' + OC.Files.Client.NS_OWNCLOUD + '}mentions'\n\t});\n\n\t/**\n\t * @class OCA.Comments.CommentModel\n\t * @classdesc\n\t *\n\t * Comment\n\t *\n\t */\n\tvar CommentModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentModel.prototype */ {\n\t\tsync: OC.Backbone.davSync,\n\n\t\tdefaults: {\n\t\t\tactorType: 'users',\n\t\t\tobjectType: 'files'\n\t\t},\n\n\t\tdavProperties: {\n\t\t\t'id':\tOC.Files.Client.PROPERTY_FILEID,\n\t\t\t'message':\tOC.Files.Client.PROPERTY_MESSAGE,\n\t\t\t'actorType':\tOC.Files.Client.PROPERTY_ACTORTYPE,\n\t\t\t'actorId':\tOC.Files.Client.PROPERTY_ACTORID,\n\t\t\t'actorDisplayName':\tOC.Files.Client.PROPERTY_ACTORDISPLAYNAME,\n\t\t\t'creationDateTime':\tOC.Files.Client.PROPERTY_CREATIONDATETIME,\n\t\t\t'objectType':\tOC.Files.Client.PROPERTY_OBJECTTYPE,\n\t\t\t'objectId':\tOC.Files.Client.PROPERTY_OBJECTID,\n\t\t\t'isUnread':\tOC.Files.Client.PROPERTY_ISUNREAD,\n\t\t\t'mentions': OC.Files.Client.PROPERTY_MENTIONS\n\t\t},\n\n\t\tparse: function(data) {\n\t\t\treturn {\n\t\t\t\tid: data.id,\n\t\t\t\tmessage: data.message,\n\t\t\t\tactorType: data.actorType,\n\t\t\t\tactorId: data.actorId,\n\t\t\t\tactorDisplayName: data.actorDisplayName,\n\t\t\t\tcreationDateTime: data.creationDateTime,\n\t\t\t\tobjectType: data.objectType,\n\t\t\t\tobjectId: data.objectId,\n\t\t\t\tisUnread: (data.isUnread === 'true'),\n\t\t\t\tmentions: this._parseMentions(data.mentions)\n\t\t\t};\n\t\t},\n\n\t\t_parseMentions: function(mentions) {\n\t\t\tif(_.isUndefined(mentions)) {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tvar result = {};\n\t\t\tfor(var i in mentions) {\n\t\t\t\tvar mention = mentions[i];\n\t\t\t\tif(_.isUndefined(mention.localName) || mention.localName !== 'mention') {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tresult[i] = {};\n\t\t\t\tfor (var child = mention.firstChild; child; child = child.nextSibling) {\n\t\t\t\t\tif(_.isUndefined(child.localName) || !child.localName.startsWith('mention')) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tresult[i][child.localName] = child.textContent;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t});\n\n\tOCA.Comments.CommentModel = CommentModel;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t/**\n\t * @class OCA.Comments.CommentCollection\n\t * @classdesc\n\t *\n\t * Collection of comments assigned to a file\n\t *\n\t */\n\tvar CommentCollection = OC.Backbone.Collection.extend(\n\t\t/** @lends OCA.Comments.CommentCollection.prototype */ {\n\n\t\tsync: OC.Backbone.davSync,\n\n\t\tmodel: OCA.Comments.CommentModel,\n\n\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectType: 'files',\n\n\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectId: null,\n\n\t\t/**\n\t\t * True if there are no more page results left to fetch\n\t\t *\n\t\t * @type bool\n\t\t */\n\t\t_endReached: false,\n\n\t\t/**\n\t\t * Number of comments to fetch per page\n\t\t *\n\t\t * @type int\n\t\t */\n\t\t_limit : 20,\n\n\t\t/**\n\t\t * Initializes the collection\n\t\t *\n\t\t * @param {string} [options.objectType] object type\n\t\t * @param {string} [options.objectId] object id\n\t\t */\n\t\tinitialize: function(models, options) {\n\t\t\toptions = options || {};\n\t\t\tif (options.objectType) {\n\t\t\t\tthis._objectType = options.objectType;\n\t\t\t}\n\t\t\tif (options.objectId) {\n\t\t\t\tthis._objectId = options.objectId;\n\t\t\t}\n\t\t},\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/comments/' +\n\t\t\t\tencodeURIComponent(this._objectType) + '/' +\n\t\t\t\tencodeURIComponent(this._objectId) + '/';\n\t\t},\n\n\t\tsetObjectId: function(objectId) {\n\t\t\tthis._objectId = objectId;\n\t\t},\n\n\t\thasMoreResults: function() {\n\t\t\treturn !this._endReached;\n\t\t},\n\n\t\treset: function() {\n\t\t\tthis._endReached = false;\n\t\t\tthis._summaryModel = null;\n\t\t\treturn OC.Backbone.Collection.prototype.reset.apply(this, arguments);\n\t\t},\n\n\t\t/**\n\t\t * Fetch the next set of results\n\t\t */\n\t\tfetchNext: function(options) {\n\t\t\tvar self = this;\n\t\t\tif (!this.hasMoreResults()) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar body = '<?xml version=\"1.0\" encoding=\"utf-8\" ?>\\n' +\n\t\t\t\t'<oc:filter-comments xmlns:D=\"DAV:\" xmlns:oc=\"http://owncloud.org/ns\">\\n' +\n\t\t\t\t// load one more so we know there is more\n\t\t\t\t'    <oc:limit>' + (this._limit + 1) + '</oc:limit>\\n' +\n\t\t\t\t'    <oc:offset>' + this.length + '</oc:offset>\\n' +\n\t\t\t\t'</oc:filter-comments>\\n';\n\n\t\t\toptions = options || {};\n\t\t\tvar success = options.success;\n\t\t\toptions = _.extend({\n\t\t\t\tremove: false,\n\t\t\t\tparse: true,\n\t\t\t\tdata: body,\n\t\t\t\tdavProperties: CommentCollection.prototype.model.prototype.davProperties,\n\t\t\t\tsuccess: function(resp) {\n\t\t\t\t\tif (resp.length <= self._limit) {\n\t\t\t\t\t\t// no new entries, end reached\n\t\t\t\t\t\tself._endReached = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// remove last entry, for next page load\n\t\t\t\t\t\tresp = _.initial(resp);\n\t\t\t\t\t}\n\t\t\t\t\tif (!self.set(resp, options)) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tsuccess.apply(null, arguments);\n\t\t\t\t\t}\n\t\t\t\t\tself.trigger('sync', 'REPORT', self, options);\n\t\t\t\t}\n\t\t\t}, options);\n\n\t\t\treturn this.sync('REPORT', this, options);\n\t\t},\n\n\t\t/**\n\t\t * Returns the matching summary model\n\t\t *\n\t\t * @return {OCA.Comments.CommentSummaryModel} summary model\n\t\t */\n\t\tgetSummaryModel: function() {\n\t\t\tif (!this._summaryModel) {\n\t\t\t\tthis._summaryModel = new OCA.Comments.CommentSummaryModel({\n\t\t\t\t\tid: this._objectId,\n\t\t\t\t\tobjectType: this._objectType\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn this._summaryModel;\n\t\t},\n\n\t\t/**\n\t\t * Updates the read marker for this comment thread\n\t\t *\n\t\t * @param {Date} [date] optional date, defaults to now\n\t\t * @param {Object} [options] backbone options\n\t\t */\n\t\tupdateReadMarker: function(date, options) {\n\t\t\toptions = options || {};\n\n\t\t\treturn this.getSummaryModel().save({\n\t\t\t\treadMarker: (date || new Date()).toUTCString()\n\t\t\t}, options);\n\t\t}\n\t});\n\n\tOCA.Comments.CommentCollection = CommentCollection;\n})(OC, OCA);\n\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n(function(OC, OCA) {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_READMARKER:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}readMarker'\n\t});\n\n\t/**\n\t * @class OCA.Comments.CommentSummaryModel\n\t * @classdesc\n\t *\n\t * Model containing summary information related to comments\n\t * like the read marker.\n\t *\n\t */\n\tvar CommentSummaryModel = OC.Backbone.Model.extend(\n\t\t/** @lends OCA.Comments.CommentSummaryModel.prototype */ {\n\t\tsync: OC.Backbone.davSync,\n\n\t\t/**\n\t\t * Object type\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectType: 'files',\n\n\t\t/**\n\t\t * Object id\n\t\t *\n\t\t * @type string\n\t\t */\n\t\t_objectId: null,\n\n\t\tdavProperties: {\n\t\t\t'readMarker': OC.Files.Client.PROPERTY_READMARKER\n\t\t},\n\n\t\t/**\n\t\t * Initializes the summary model\n\t\t *\n\t\t * @param {string} [options.objectType] object type\n\t\t * @param {string} [options.objectId] object id\n\t\t */\n\t\tinitialize: function(attrs, options) {\n\t\t\toptions = options || {};\n\t\t\tif (options.objectType) {\n\t\t\t\tthis._objectType = options.objectType;\n\t\t\t}\n\t\t},\n\n\t\turl: function() {\n\t\t\treturn OC.linkToRemote('dav') + '/comments/' +\n\t\t\t\tencodeURIComponent(this._objectType) + '/' +\n\t\t\t\tencodeURIComponent(this.id) + '/';\n\t\t}\n\t});\n\n\tOCA.Comments.CommentSummaryModel = CommentSummaryModel;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars, escapeHTML */\n\n(function(OC, OCA) {\n\n\t/**\n\t * @memberof OCA.Comments\n\t */\n\tvar CommentsTabView = OCA.Files.DetailTabView.extend(\n\t\t/** @lends OCA.Comments.CommentsTabView.prototype */ {\n\t\tid: 'commentsTabView',\n\t\tclassName: 'tab commentsTabView',\n\t\t_autoCompleteData: undefined,\n\t\t_commentsModifyMenu: undefined,\n\n\t\tevents: {\n\t\t\t'submit .newCommentForm': '_onSubmitComment',\n\t\t\t'click .showMore': '_onClickShowMore',\n\t\t\t'click .cancel': '_onClickCloseComment',\n\t\t\t'click .comment': '_onClickComment',\n\t\t\t'keyup div.message': '_onTextChange',\n\t\t\t'change div.message': '_onTextChange',\n\t\t\t'input div.message': '_onTextChange',\n\t\t\t'paste div.message': '_onPaste'\n\t\t},\n\n\t\t_commentMaxLength: 1000,\n\n\t\tinitialize: function() {\n\t\t\tOCA.Files.DetailTabView.prototype.initialize.apply(this, arguments);\n\t\t\tthis.collection = new OCA.Comments.CommentCollection();\n\t\t\tthis.collection.on('request', this._onRequest, this);\n\t\t\tthis.collection.on('sync', this._onEndRequest, this);\n\t\t\tthis.collection.on('add', this._onAddModel, this);\n\t\t\tthis.collection.on('change:message', this._onChangeModel, this);\n\n\t\t\tthis._commentMaxThreshold = this._commentMaxLength * 0.9;\n\n\t\t\t// TODO: error handling\n\t\t\t_.bindAll(this, '_onTypeComment', '_initAutoComplete', '_onAutoComplete');\n\t\t},\n\n\t\ttemplate: function(params) {\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\treturn OCA.Comments.Templates['view'](_.extend({\n\t\t\t\tactorId: currentUser.uid,\n\t\t\t\tactorDisplayName: currentUser.displayName\n\t\t\t}, params));\n\t\t},\n\n\t\teditCommentTemplate: function(params) {\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\treturn OCA.Comments.Templates['edit_comment'](_.extend({\n\t\t\t\tactorId: currentUser.uid,\n\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\tnewMessagePlaceholder: t('comments', 'New comment …'),\n\t\t\t\tsubmitText: t('comments', 'Post'),\n\t\t\t\tcancelText: t('comments', 'Cancel'),\n\t\t\t\ttag: 'li'\n\t\t\t}, params));\n\t\t},\n\n\t\tcommentTemplate: function(params) {\n\t\t\tparams = _.extend({\n\t\t\t\teditTooltip: t('comments', 'Edit comment'),\n\t\t\t\tisUserAuthor: OC.getCurrentUser().uid === params.actorId,\n\t\t\t\tisLong: this._isLong(params.message)\n\t\t\t}, params);\n\n\t\t\tif (params.actorType === 'deleted_users') {\n\t\t\t\t// makes the avatar a X\n\t\t\t\tparams.actorId = null;\n\t\t\t\tparams.actorDisplayName = t('comments', '[Deleted user]');\n\t\t\t}\n\n\t\t\treturn OCA.Comments.Templates['comment'](params);\n\t\t},\n\n\t\tgetLabel: function() {\n\t\t\treturn t('comments', 'Comments');\n\t\t},\n\n\t\tgetIcon: function() {\n\t\t\treturn 'icon-comment';\n\t\t},\n\n\t\tsetFileInfo: function(fileInfo) {\n\t\t\tif (fileInfo) {\n\t\t\t\tthis.model = fileInfo;\n\n\t\t\t\tthis.render();\n\t\t\t\tthis._initAutoComplete($('#commentsTabView').find('.newCommentForm .message'));\n\t\t\t\tthis.collection.setObjectId(this.model.id);\n\t\t\t\t// reset to first page\n\t\t\t\tthis.collection.reset([], {silent: true});\n\t\t\t\tthis.nextPage();\n\t\t\t} else {\n\t\t\t\tthis.model = null;\n\t\t\t\tthis.render();\n\t\t\t\tthis.collection.reset();\n\t\t\t}\n\t\t},\n\n\t\trender: function() {\n\t\t\tthis.$el.html(this.template({\n\t\t\t\temptyResultLabel: t('comments', 'No comments yet, start the conversation!'),\n\t\t\t\tmoreLabel: t('comments', 'More comments …')\n\t\t\t}));\n\t\t\tthis.$el.find('.comments').before(this.editCommentTemplate({ tag: 'div'}));\n\t\t\tthis.$el.find('.has-tooltip').tooltip();\n\t\t\tthis.$container = this.$el.find('ul.comments');\n\t\t\tthis.$el.find('.avatar').avatar(OC.getCurrentUser().uid, 32);\n\t\t\tthis.delegateEvents();\n\t\t\tthis.$el.find('.message').on('keydown input change', this._onTypeComment);\n\n\t\t\tautosize(this.$el.find('.newCommentRow .message'))\n\t\t\tthis.$el.find('.newCommentForm .message').focus();\t\n\t\t},\n\n\t\t_initAutoComplete: function($target) {\n\t\t\tvar s = this;\n\t\t\tvar limit = 10;\n\t\t\tif(!_.isUndefined(OC.appConfig.comments)) {\n\t\t\t\tlimit = OC.appConfig.comments.maxAutoCompleteResults;\n\t\t\t}\n\t\t\t$target.atwho({\n\t\t\t\tat: '@',\n\t\t\t\tlimit: limit,\n\t\t\t\tcallbacks: {\n\t\t\t\t\tremoteFilter: s._onAutoComplete,\n\t\t\t\t\thighlighter: function (li) {\n\t\t\t\t\t\t// misuse the highlighter callback to instead of\n\t\t\t\t\t\t// highlighting loads the avatars.\n\t\t\t\t\t\tvar $li = $(li);\n\t\t\t\t\t\t$li.find('.avatar').avatar(undefined, 32);\n\t\t\t\t\t\treturn $li;\n\t\t\t\t\t},\n\t\t\t\t\tsorter: function (q, items) { return items; }\n\t\t\t\t},\n\t\t\t\tdisplayTpl: function (item) {\n\t\t\t\t\treturn '<li>' +\n\t\t\t\t\t\t'<span class=\"avatar-name-wrapper\">' +\n\t\t\t\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t\t\t\t'data-username=\"' + escapeHTML(item.id) + '\" ' + // for avatars\n\t\t\t\t\t\t\t\t\t'data-user=\"' + escapeHTML(item.id) + '\" ' + // for contactsmenu\n\t\t\t\t\t\t\t\t\t'data-user-display-name=\"' + escapeHTML(item.label) + '\">' +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'<strong>' + escapeHTML(item.label) + '</strong>' +\n\t\t\t\t\t\t'</span></li>';\n\t\t\t\t},\n\t\t\t\tinsertTpl: function (item) {\n\t\t\t\t\treturn '' +\n\t\t\t\t\t\t'<span class=\"avatar-name-wrapper\">' +\n\t\t\t\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t\t\t\t'data-username=\"' + escapeHTML(item.id) + '\" ' + // for avatars\n\t\t\t\t\t\t\t\t\t'data-user=\"' + escapeHTML(item.id) + '\" ' + // for contactsmenu\n\t\t\t\t\t\t\t\t\t'data-user-display-name=\"' + escapeHTML(item.label) + '\">' +\n\t\t\t\t\t\t\t'</span>' +\n\t\t\t\t\t\t\t'<strong>' + escapeHTML(item.label) + '</strong>' +\n\t\t\t\t\t\t'</span>';\n\t\t\t\t},\n\t\t\t\tsearchKey: \"label\"\n\t\t\t});\n\t\t\t$target.on('inserted.atwho', function (je, $el) {\n\t\t\t\tvar editionMode = true;\n\t\t\t\ts._postRenderItem(\n\t\t\t\t\t// we need to pass the parent of the inserted element\n\t\t\t\t\t// passing the whole comments form would re-apply and request\n\t\t\t\t\t// avatars from the server\n\t\t\t\t\t$(je.target).find(\n\t\t\t\t\t\t'span[data-username=\"' + $el.find('[data-username]').data('username') + '\"]'\n\t\t\t\t\t).parent(),\n\t\t\t\t\teditionMode\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\n\t\t_onAutoComplete: function(query, callback) {\n\t\t\tvar s = this;\n\t\t\tif(!_.isUndefined(this._autoCompleteRequestTimer)) {\n\t\t\t\tclearTimeout(this._autoCompleteRequestTimer);\n\t\t\t}\n\t\t\tthis._autoCompleteRequestTimer = _.delay(function() {\n\t\t\t\tif(!_.isUndefined(this._autoCompleteRequestCall)) {\n\t\t\t\t\tthis._autoCompleteRequestCall.abort();\n\t\t\t\t}\n\t\t\t\tthis._autoCompleteRequestCall = $.ajax({\n\t\t\t\t\turl: OC.linkToOCS('core', 2) + 'autocomplete/get',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsearch: query,\n\t\t\t\t\t\titemType: 'files',\n\t\t\t\t\t\titemId: s.model.get('id'),\n\t\t\t\t\t\tsorter: 'commenters|share-recipients',\n\t\t\t\t\t\tlimit: OC.appConfig.comments.maxAutoCompleteResults\n\t\t\t\t\t},\n\t\t\t\t\tbeforeSend: function (request) {\n\t\t\t\t\t\trequest.setRequestHeader('Accept', 'application/json');\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function (result) {\n\t\t\t\t\t\tcallback(result.ocs.data);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}, 400);\n\t\t},\n\n\t\t_formatItem: function(commentModel) {\n\t\t\tvar timestamp = new Date(commentModel.get('creationDateTime')).getTime();\n\t\t\tvar data = _.extend({\n\t\t\t\ttimestamp: timestamp,\n\t\t\t\tdate: OC.Util.relativeModifiedDate(timestamp),\n\t\t\t\taltDate: OC.Util.formatDate(timestamp),\n\t\t\t\tformattedMessage: this._formatMessage(commentModel.get('message'), commentModel.get('mentions'))\n\t\t\t}, commentModel.attributes);\n\t\t\treturn data;\n\t\t},\n\n\t\t_toggleLoading: function(state) {\n\t\t\tthis._loading = state;\n\t\t\tthis.$el.find('.loading').toggleClass('hidden', !state);\n\t\t},\n\n\t\t_onRequest: function(type) {\n\t\t\tif (type === 'REPORT') {\n\t\t\t\tthis._toggleLoading(true);\n\t\t\t\tthis.$el.find('.showMore').addClass('hidden');\n\t\t\t}\n\t\t},\n\n\t\t_onEndRequest: function(type) {\n\t\t\tvar fileInfoModel = this.model;\n\t\t\tthis._toggleLoading(false);\n\t\t\tthis.$el.find('.emptycontent').toggleClass('hidden', !!this.collection.length);\n\t\t\tthis.$el.find('.showMore').toggleClass('hidden', !this.collection.hasMoreResults());\n\n\t\t\tif (type !== 'REPORT') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// find first unread comment\n\t\t\tvar firstUnreadComment = this.collection.findWhere({isUnread: true});\n\t\t\tif (firstUnreadComment) {\n\t\t\t\t// update read marker\n\t\t\t\tthis.collection.updateReadMarker(\n\t\t\t\t\tnull,\n\t\t\t\t\t{\n\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\tfileInfoModel.set('commentsUnread', 0);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.$el.find('.newCommentForm .message').focus();\t\n\t\t\t\n\t\t},\n\n\t\t/**\n\t\t * takes care of post-rendering after a new comment was added to the\n\t\t * collection\n\t\t *\n\t\t * @param model\n\t\t * @param collection\n\t\t * @param options\n\t\t * @private\n\t\t */\n\t\t_onAddModel: function(model, collection, options) {\n\t\t\t// we need to render it immediately, to ensure that the right\n\t\t\t// order of comments is kept on opening comments tab\n\t\t\tvar $comment = $(this.commentTemplate(this._formatItem(model)));\n\t\t\tif (!_.isUndefined(options.at) && collection.length > 1) {\n\t\t\t\tthis.$container.find('li').eq(options.at).before($comment);\n\t\t\t} else {\n\t\t\t\tthis.$container.append($comment);\n\t\t\t}\n\t\t\tthis._postRenderItem($comment);\n\t\t\t$('#commentsTabView').find('.newCommentForm div.message').text('').prop('contenteditable', true);\n\n\t\t\t// we need to update the model, because it consists of client data\n\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\tvar oldMentions = model.get('mentions');\n\t\t\tvar self = this;\n\t\t\tmodel.fetch({\n\t\t\t\tsuccess: function (model) {\n\t\t\t\t\tif(_.isEqual(oldMentions, model.get('mentions'))) {\n\t\t\t\t\t\t// don't attempt to render if unnecessary, avoids flickering\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tvar $updated = $(self.commentTemplate(self._formatItem(model)));\n\t\t\t\t\t$comment.html($updated.html());\n\t\t\t\t\tself._postRenderItem($comment);\n\t\t\t\t}\n\t\t\t})\n\n\t\t},\n\n\t\t/**\n\t\t * takes care of post-rendering after a new comment was edited\n\t\t *\n\t\t * @param model\n\t\t * @private\n\t\t */\n\t\t_onChangeModel: function (model) {\n\t\t\tif(model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $form = this.$container.find('.comment[data-id=\"' + model.id + '\"] form');\n\t\t\tvar $row = $form.closest('.comment');\n\t\t\tvar $target = $row.data('commentEl');\n\t\t\tif(_.isUndefined($target)) {\n\t\t\t\t// ignore noise – this is only set after editing a comment and hitting post\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar self = this;\n\n\t\t\t// we need to update the model, because it consists of client data\n\t\t\t// only, but the server might add meta data, e.g. about mentions\n\t\t\tmodel.fetch({\n\t\t\t\tsuccess: function (model) {\n\t\t\t\t\t$target.removeClass('hidden');\n\t\t\t\t\t$row.remove();\n\n\t\t\t\t\tvar $message = $target.find('.message');\n\t\t\t\t\t$message\n\t\t\t\t\t\t.html(self._formatMessage(model.get('message'), model.get('mentions')))\n\t\t\t\t\t\t.find('.avatar')\n\t\t\t\t\t\t.each(function () { $(this).avatar(); });\n\t\t\t\t\tself._postRenderItem($message);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t_postRenderItem: function($el, editionMode) {\n\t\t\t$el.find('.has-tooltip').tooltip();\n\t\t\tvar inlineAvatars = $el.find('.message .avatar');\n\t\t\tif ($($el.context).hasClass('message')) {\n\t\t\t\tinlineAvatars = $el.find('.avatar');\n\t\t\t}\n\t\t\tinlineAvatars.each(function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.avatar($this.attr('data-username'), 16);\n\t\t\t});\n\t\t\t$el.find('.authorRow .avatar').each(function () {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.avatar($this.attr('data-username'), 32);\n\t\t\t});\n\n\t\t\tvar username = $el.find('.avatar').data('username');\n\t\t\tif (username !== oc_current_user) {\n\t\t\t\t$el.find('.authorRow .avatar, .authorRow .author').contactsMenu(\n\t\t\t\t\tusername, 0, $el.find('.authorRow'));\n\t\t\t}\n\n\t\t\tvar $message = $el.find('.message');\n\t\t\tif($message.length === 0) {\n\t\t\t\t// it is the case when writing a comment and mentioning a person\n\t\t\t\t$message = $el;\n\t\t\t}\n\n\n\t\t\tif (!editionMode) {\n\t\t\t\tvar self = this;\n\t\t\t\t// add the dropdown menu to display the edit and delete option\n\t\t\t\tvar modifyCommentMenu = new OCA.Comments.CommentsModifyMenu();\n\t\t\t\t$el.find('.authorRow').append(modifyCommentMenu.$el);\n\t\t\t\t$el.find('.more').on('click', _.bind(modifyCommentMenu.show, modifyCommentMenu));\n\n\t\t\t\tself.listenTo(modifyCommentMenu, 'select:menu-item-clicked', function(ev, action) {\n\t\t\t\t\tif (action === 'edit') {\n\t\t\t\t\t\tself._onClickEditComment(ev);\n\t\t\t\t\t} else if (action === 'delete') {\n\t\t\t\t\t\tself._onClickDeleteComment(ev);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis._postRenderMessage($message, editionMode);\n\t\t},\n\n\t\t_postRenderMessage: function($el, editionMode) {\n\t\t\tif (editionMode) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$el.find('.avatar-name-wrapper').each(function() {\n\t\t\t\tvar $this = $(this);\n\t\t\t\tvar $avatar = $this.find('.avatar');\n\n\t\t\t\tvar user = $avatar.data('user');\n\t\t\t\tif (user !== OC.getCurrentUser().uid) {\n\t\t\t\t\t$this.contactsMenu(user, 0, $this);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t * Convert a message to be displayed in HTML,\n\t\t * converts newlines to <br> tags.\n\t\t */\n\t\t_formatMessage: function(message, mentions, editMode) {\n\t\t\tmessage = escapeHTML(message).replace(/\\n/g, '<br/>');\n\n\t\t\tfor(var i in mentions) {\n\t\t\t\tif(!mentions.hasOwnProperty(i)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar mention = '@' + mentions[i].mentionId;\n\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\tmention = _.escape('@\"' + mentions[i].mentionId + '\"');\n\t\t\t\t}\n\n\t\t\t\t// escape possible regex characters in the name\n\t\t\t\tmention = mention.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\t\t\t\tvar regex = new RegExp(\"(^|\\\\s)(\" + mention + \")\\\\b\", 'g');\n\t\t\t\tif (mentions[i].mentionId.indexOf(' ') !== -1) {\n\t\t\t\t\tregex = new RegExp(\"(^|\\\\s)(\" + mention + \")\", 'g');\n\t\t\t\t}\n\n\t\t\t\tvar displayName = this._composeHTMLMention(mentions[i].mentionId, mentions[i].mentionDisplayName);\n\n\t\t\t\t// replace every mention either at the start of the input or after a whitespace\n\t\t\t\t// followed by a non-word character.\n\t\t\t\tmessage = message.replace(regex,\n\t\t\t\t\tfunction(match, p1) {\n\t\t\t\t\t\t// to  get number of whitespaces (0 vs 1) right\n\t\t\t\t\t\treturn p1+displayName;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(editMode !== true) {\n\t\t\t\tmessage = OCP.Comments.plainToRich(message);\n\t\t\t}\n\t\t\treturn message;\n\t\t},\n\n\t\t_composeHTMLMention: function(uid, displayName) {\n\t\t\tvar avatar = '' +\n\t\t\t\t'<span class=\"avatar\" ' +\n\t\t\t\t\t\t'data-username=\"' + _.escape(uid) + '\" ' +\n\t\t\t\t\t\t'data-user=\"' + _.escape(uid) + '\" ' +\n\t\t\t\t\t\t'data-user-display-name=\"' + _.escape(displayName) + '\">' +\n\t\t\t\t'</span>';\n\n\t\t\tvar isCurrentUser = (uid === OC.getCurrentUser().uid);\n\n\t\t\treturn '' +\n\t\t\t\t'<span class=\"atwho-inserted\" contenteditable=\"false\">' +\n\t\t\t\t\t'<span class=\"avatar-name-wrapper' + (isCurrentUser ? ' currentUser' : '') + '\">' +\n\t\t\t\t\t\tavatar +\n\t\t\t\t\t\t'<strong>' + _.escape(displayName) + '</strong>' +\n\t\t\t\t\t'</span>' +\n\t\t\t\t'</span>';\n\t\t},\n\n\t\tnextPage: function() {\n\t\t\tif (this._loading || !this.collection.hasMoreResults()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.collection.fetchNext();\n\t\t},\n\n\t\t_onClickEditComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $comment = $(ev.target).closest('.comment');\n\t\t\tvar commentId = $comment.data('id');\n\t\t\tvar commentToEdit = this.collection.get(commentId);\n\t\t\tvar $formRow = $(this.editCommentTemplate(_.extend({\n\t\t\t\tisEditMode: true,\n\t\t\t\tsubmitText: t('comments', 'Save')\n\t\t\t}, commentToEdit.attributes)));\n\n\t\t\t$comment.addClass('hidden').removeClass('collapsed');\n\t\t\t// spawn form\n\t\t\t$comment.after($formRow);\n\t\t\t$formRow.data('commentEl', $comment);\n\t\t\t$formRow.find('.message').on('keydown input change', this._onTypeComment);\n\n\t\t\t// copy avatar element from original to avoid flickering\n\t\t\t$formRow.find('.avatar:first').replaceWith($comment.find('.avatar:first').clone());\n\t\t\t$formRow.find('.has-tooltip').tooltip();\n\n\t\t\tvar $message = $formRow.find('.message');\n\t\t\t$message\n\t\t\t\t.html(this._formatMessage(commentToEdit.get('message'), commentToEdit.get('mentions'), true))\n\t\t\t\t.find('.avatar')\n\t\t\t\t.each(function () { $(this).avatar(); });\n\t\t\tvar editionMode = true;\n\t\t\tthis._postRenderItem($message, editionMode);\n\n\t\t\t// Enable autosize\n\t\t\tautosize($formRow.find('.message'));\n\n\t\t\t// enable autocomplete\n\t\t\tthis._initAutoComplete($formRow.find('.message'));\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_onTypeComment: function(ev) {\n\t\t\tvar $field = $(ev.target);\n\t\t\tvar len = $field.text().length;\n\t\t\tvar $submitButton = $field.data('submitButtonEl');\n\t\t\tif (!$submitButton) {\n\t\t\t\t$submitButton = $field.closest('form').find('.submit');\n\t\t\t\t$field.data('submitButtonEl', $submitButton);\n\t\t\t}\n\t\t\t$field.tooltip('hide');\n\t\t\tif (len > this._commentMaxThreshold) {\n\t\t\t\t$field.attr('data-original-title', t('comments', 'Allowed characters {count} of {max}', {count: len, max: this._commentMaxLength}));\n\t\t\t\t$field.tooltip({trigger: 'manual'});\n\t\t\t\t$field.tooltip('show');\n\t\t\t\t$field.addClass('error');\n\t\t\t}\n\n\t\t\tvar limitExceeded = (len > this._commentMaxLength);\n\t\t\t$field.toggleClass('error', limitExceeded);\n\t\t\t$submitButton.prop('disabled', limitExceeded);\n\n\t\t\t// Submits form with Enter, but Shift+Enter is a new line. If the\n\t\t\t// autocomplete popover is being shown Enter does not submit the\n\t\t\t// form either; it will be handled by At.js which will add the\n\t\t\t// currently selected item to the message.\n\t\t\tif (ev.keyCode === 13 && !ev.shiftKey && !$field.atwho('isSelecting')) {\n\t\t\t\t$submitButton.click();\n\t\t\t\tev.preventDefault();\n\t\t\t}\n\t\t},\n\n\t\t_onClickComment: function(ev) {\n\t\t\tvar $row = $(ev.target);\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment');\n\t\t\t}\n\t\t\t$row.removeClass('collapsed');\n\t\t},\n\n\t\t_onClickCloseComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $row = $(ev.target).closest('.comment');\n\t\t\t$row.data('commentEl').removeClass('hidden');\n\t\t\t$row.remove();\n\t\t\treturn false;\n\t\t},\n\n\t\t_onClickDeleteComment: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tvar $comment = $(ev.target).closest('.comment');\n\t\t\tvar commentId = $comment.data('id');\n\t\t\tvar $loading = $comment.find('.deleteLoading');\n\t\t\tvar $moreIcon = $comment.find('.more');\n\n\t\t\t$comment.addClass('disabled');\n\t\t\t$loading.removeClass('hidden');\n\t\t\t$moreIcon.addClass('hidden');\n\n\t\t\t$comment.data('commentEl', $comment);\n\n\t\t\tthis.collection.get(commentId).destroy({\n\t\t\t\tsuccess: function() {\n\t\t\t\t\t$comment.data('commentEl').remove();\n\t\t\t\t\t$comment.remove();\n\t\t\t\t},\n\t\t\t\terror: function() {\n\t\t\t\t\t$loading.addClass('hidden');\n\t\t\t\t\t$moreIcon.removeClass('hidden');\n\t\t\t\t\t$comment.removeClass('disabled');\n\n\t\t\t\t\tOC.Notification.showTemporary(t('comments', 'Error occurred while retrieving comment with ID {id}', {id: commentId}));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn false;\n\t\t},\n\n\t\t_onClickShowMore: function(ev) {\n\t\t\tev.preventDefault();\n\t\t\tthis.nextPage();\n\t\t},\n\n\t\t/**\n\t\t * takes care of updating comment element states after submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {OC.Backbone.Model} model\n\t\t * @param {jQuery} $form\n\t\t * @private\n\t\t */\n\t\t_onSubmitSuccess: function(model, $form) {\n\t\t\tvar $submit = $form.find('.submit');\n\t\t\tvar $loading = $form.find('.submitLoading');\n\n\t\t\t$submit.removeClass('hidden');\n\t\t\t$loading.addClass('hidden');\n\t\t},\n\n\t\t_commentBodyHTML2Plain: function($el) {\n\t\t\tvar $comment = $el.clone();\n\n\t\t\t$comment.find('.avatar-name-wrapper').each(function () {\n\t\t\t\tvar $this = $(this),\n\t\t\t\t\t$inserted = $this.parent(),\n\t\t\t\t\tuserId = $this.find('.avatar').data('username');\n\t\t\t\tif (userId.indexOf(' ') !== -1) {\n\t\t\t\t\t$inserted.html('@\"' + userId + '\"');\n\t\t\t\t} else {\n\t\t\t\t\t$inserted.html('@' + userId);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$comment.html(OCP.Comments.richToPlain($comment.html()));\n\n\t\t\tvar oldHtml;\n\t\t\tvar html = $comment.html();\n\t\t\tdo {\n\t\t\t\t// replace works one by one\n\t\t\t\toldHtml = html;\n\t\t\t\thtml = oldHtml.replace(\"<br>\", \"\\n\");\t// preserve line breaks\n\t\t\t} while(oldHtml !== html);\n\t\t\t$comment.html(html);\n\n\t\t\treturn $comment.text();\n\t\t},\n\n\t\t_onSubmitComment: function(e) {\n\t\t\tvar self = this;\n\t\t\tvar $form = $(e.target);\n\t\t\tvar commentId = $form.closest('.comment').data('id');\n\t\t\tvar currentUser = OC.getCurrentUser();\n\t\t\tvar $submit = $form.find('.submit');\n\t\t\tvar $loading = $form.find('.submitLoading');\n\t\t\tvar $commentField = $form.find('.message');\n\t\t\tvar message = $commentField.text().trim();\n\t\t\te.preventDefault();\n\n\t\t\tif (!message.length || message.length > this._commentMaxLength) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$commentField.prop('contenteditable', false);\n\t\t\t$submit.addClass('hidden');\n\t\t\t$loading.removeClass('hidden');\n\n\t\t\tmessage = this._commentBodyHTML2Plain($commentField);\n\t\t\tif (commentId) {\n\t\t\t\t// edit mode\n\t\t\t\tvar comment = this.collection.get(commentId);\n\t\t\t\tcomment.save({\n\t\t\t\t\tmessage: message\n\t\t\t\t}, {\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tself._onSubmitSuccess(model, $form);\n\t\t\t\t\t\tif(model.get('message').trim() === model.previous('message').trim()) {\n\t\t\t\t\t\t\t// model change event doesn't trigger, manually remove the row.\n\t\t\t\t\t\t\tvar $row = $form.closest('.comment');\n\t\t\t\t\t\t\t$row.data('commentEl').removeClass('hidden');\n\t\t\t\t\t\t\t$row.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tself._onSubmitError($form, commentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.collection.create({\n\t\t\t\t\tactorId: currentUser.uid,\n\t\t\t\t\tactorDisplayName: currentUser.displayName,\n\t\t\t\t\tactorType: 'users',\n\t\t\t\t\tverb: 'comment',\n\t\t\t\t\tmessage: message,\n\t\t\t\t\tcreationDateTime: (new Date()).toUTCString()\n\t\t\t\t}, {\n\t\t\t\t\tat: 0,\n\t\t\t\t\t// wait for real creation before adding\n\t\t\t\t\twait: true,\n\t\t\t\t\tsuccess: function(model) {\n\t\t\t\t\t\tself._onSubmitSuccess(model, $form);\n\t\t\t\t\t},\n\t\t\t\t\terror: function() {\n\t\t\t\t\t\tself._onSubmitError($form, undefined);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\n\t\t/**\n\t\t * takes care of updating the UI after an error on submit (either new\n\t\t * comment or edit).\n\t\t *\n\t\t * @param {jQuery} $form\n\t\t * @param {string|undefined} commentId\n\t\t * @private\n\t\t */\n\t\t_onSubmitError: function($form, commentId) {\n\t\t\t$form.find('.submit').removeClass('hidden');\n\t\t\t$form.find('.submitLoading').addClass('hidden');\n\t\t\t$form.find('.message').prop('contenteditable', true);\n\n\t\t\tif(!_.isUndefined(commentId)) {\n\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while updating comment with id {id}', {id: commentId}), {type: 'error'});\n\t\t\t} else {\n\t\t\t\tOC.Notification.show(t('comments', 'Error occurred while posting comment'), {type: 'error'});\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * ensures the contenteditable div is really empty, when user removed\n\t\t * all input, so that the placeholder will be shown again\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_onTextChange: function() {\n\t\t\tvar $message = $('#commentsTabView').find('.newCommentForm div.message');\n\t\t\tif(!$message.text().trim().length) {\n\t\t\t\t$message.empty();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Limit pasting to plain text\n\t\t *\n\t\t * @param e\n\t\t * @private\n\t\t */\n\t\t_onPaste: function (e) {\n\t\t\te.preventDefault();\n\t\t\tvar text = e.originalEvent.clipboardData.getData(\"text/plain\");\n\t\t\tdocument.execCommand('insertText', false, text);\n\t\t},\n\n\t\t/**\n\t\t * Returns whether the given message is long and needs\n\t\t * collapsing\n\t\t */\n\t\t_isLong: function(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1;\n\t\t}\n\t});\n\n\tOCA.Comments.CommentsTabView = CommentsTabView;\n})(OC, OCA);\n","/*\n * Copyright (c) 2018\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n(function() {\n\n\t/**\n\t * Construct a new CommentsModifyMenuinstance\n\t * @constructs CommentsModifyMenu\n\t * @memberof OC.Comments\n\t * @private\n\t */\n\tvar CommentsModifyMenu = OC.Backbone.View.extend({\n\t\ttagName: 'div',\n\t\tclassName: 'commentsModifyMenu popovermenu bubble menu',\n\t\t_scopes: [\n\t\t\t{\n\t\t\t\tname: 'edit',\n\t\t\t\tdisplayName:  t('comments', 'Edit comment'),\n\t\t\t\ticonClass: 'icon-rename'\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: 'delete',\n\t\t\t\tdisplayName: t('comments', 'Delete comment'),\n\t\t\t\ticonClass: 'icon-delete'\n\t\t\t}\n\t\t],\n\t\tinitialize: function() {\n\n\t\t},\n\t\tevents: {\n\t\t\t'click a.action': '_onClickAction'\n\t\t},\n\n\t\t/**\n\t\t * Event handler whenever an action has been clicked within the menu\n\t\t *\n\t\t * @param {Object} event event object\n\t\t */\n\t\t_onClickAction: function(event) {\n\t\t\tvar $target = $(event.currentTarget);\n\t\t\tif (!$target.hasClass('menuitem')) {\n\t\t\t\t$target = $target.closest('.menuitem');\n\t\t\t}\n\n\t\t\tOC.hideMenus();\n\n\t\t\tthis.trigger('select:menu-item-clicked', event, $target.data('action'));\n\t\t},\n\n\t\t/**\n\t\t * Renders the menu with the currently set items\n\t\t */\n\t\trender: function() {\n\t\t\tthis.$el.html(OCA.Comments.Templates['commentsmodifymenu']({\n\t\t\t\titems: this._scopes\n\t\t\t}));\n\t\t},\n\n\t\t/**\n\t\t * Displays the menu\n\t\t */\n\t\tshow: function(context) {\n\t\t\tthis._context = context;\n\n\t\t\tfor(var i in this._scopes) {\n\t\t\t\tthis._scopes[i].active = false;\n\t\t\t}\n\n\n\t\t\tvar $el = $(context.target);\n\t\t\tvar offsetIcon = $el.offset();\n\t\t\tvar offsetContainer = $el.closest('.authorRow').offset();\n\n\t\t\t// adding some extra top offset to push the menu below the button.\n\t\t\tvar position = {\n\t\t\t\ttop: offsetIcon.top - offsetContainer.top + 48,\n\t\t\t\tleft: '',\n\t\t\t\tright: ''\n\t\t\t};\n\n\t\t\tposition.left = offsetIcon.left - offsetContainer.left;\n\n\t\t\tif (position.left > 200) {\n\t\t\t\t// we need to position the menu to the right.\n\t\t\t\tposition.left = '';\n\t\t\t\tposition.right = this.$el.closest('.comment').find('.date').width();\n\t\t\t\tthis.$el.removeClass('menu-left').addClass('menu-right');\n\t\t\t} else {\n\t\t\t\tthis.$el.removeClass('menu-right').addClass('menu-left');\n\t\t\t}\n\t\t\tthis.$el.css(position);\n\t\t\tthis.render();\n\t\t\tthis.$el.removeClass('hidden');\n\n\t\t\tOC.showMenu(null, this.$el);\n\t\t}\n\t});\n\n\tOCA.Comments = OCA.Comments || {};\n\tOCA.Comments.CommentsModifyMenu = CommentsModifyMenu;\n})(OC, OCA);\n","/*\n * Copyright (c) 2016 Vincent Petry <pvince81@owncloud.com>\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n\n/* global Handlebars */\n\n(function() {\n\n\t_.extend(OC.Files.Client, {\n\t\tPROPERTY_COMMENTS_UNREAD:\t'{' + OC.Files.Client.NS_OWNCLOUD + '}comments-unread'\n\t});\n\n\tOCA.Comments = _.extend({}, OCA.Comments);\n\tif (!OCA.Comments) {\n\t\t/**\n\t\t * @namespace\n\t\t */\n\t\tOCA.Comments = {};\n\t}\n\n\t/**\n\t * @namespace\n\t */\n\tOCA.Comments.FilesPlugin = {\n\t\tignoreLists: [\n\t\t\t'trashbin',\n\t\t\t'files.public'\n\t\t],\n\n\t\t_formatCommentCount: function(count) {\n\t\t\treturn OCA.Comments.Templates['filesplugin']({\n\t\t\t\tcount: count,\n\t\t\t\tcountMessage: n('comments', '%n unread comment', '%n unread comments', count),\n\t\t\t\ticonUrl: OC.imagePath('core', 'actions/comment')\n\t\t\t});\n\t\t},\n\n\t\tattach: function(fileList) {\n\t\t\tvar self = this;\n\t\t\tif (this.ignoreLists.indexOf(fileList.id) >= 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfileList.registerTabView(new OCA.Comments.CommentsTabView('commentsTabView'));\n\n\t\t\tvar oldGetWebdavProperties = fileList._getWebdavProperties;\n\t\t\tfileList._getWebdavProperties = function() {\n\t\t\t\tvar props = oldGetWebdavProperties.apply(this, arguments);\n\t\t\t\tprops.push(OC.Files.Client.PROPERTY_COMMENTS_UNREAD);\n\t\t\t\treturn props;\n\t\t\t};\n\n\t\t\tfileList.filesClient.addFileInfoParser(function(response) {\n\t\t\t\tvar data = {};\n\t\t\t\tvar props = response.propStat[0].properties;\n\t\t\t\tvar commentsUnread = props[OC.Files.Client.PROPERTY_COMMENTS_UNREAD];\n\t\t\t\tif (!_.isUndefined(commentsUnread) && commentsUnread !== '') {\n\t\t\t\t\tdata.commentsUnread = parseInt(commentsUnread, 10);\n\t\t\t\t}\n\t\t\t\treturn data;\n\t\t\t});\n\n\t\t\tfileList.$el.addClass('has-comments');\n\t\t\tvar oldCreateRow = fileList._createRow;\n\t\t\tfileList._createRow = function(fileData) {\n\t\t\t\tvar $tr = oldCreateRow.apply(this, arguments);\n\t\t\t\tif (fileData.commentsUnread) {\n\t\t\t\t\t$tr.attr('data-comments-unread', fileData.commentsUnread);\n\t\t\t\t}\n\t\t\t\treturn $tr;\n\t\t\t};\n\n\t\t\t// register \"comment\" action for reading comments\n\t\t\tfileList.fileActions.registerAction({\n\t\t\t\tname: 'Comment',\n\t\t\t\tdisplayName: function(context) {\n\t\t\t\t\tif (context && context.$file) {\n\t\t\t\t\t\tvar unread = parseInt(context.$file.data('comments-unread'), 10)\n\t\t\t\t\t\tif (unread >= 0) {\n\t\t\t\t\t\t\treturn n('comments', '1 new comment', '{unread} new comments', unread, { unread: unread })\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn t('comments', 'Comment')\n\t\t\t\t},\n\t\t\t\tmime: 'all',\n\t\t\t\torder: -140,\n\t\t\t\ticonClass: 'icon-comment',\n\t\t\t\tpermissions: OC.PERMISSION_READ,\n\t\t\t\ttype: OCA.Files.FileActions.TYPE_INLINE,\n\t\t\t\trender: function(actionSpec, isDefault, context) {\n\t\t\t\t\tvar $file = context.$file;\n\t\t\t\t\tvar unreadComments = $file.data('comments-unread');\n\t\t\t\t\tif (unreadComments) {\n\t\t\t\t\t\tvar $actionLink = $(self._formatCommentCount(unreadComments));\n\t\t\t\t\t\tcontext.$file.find('a.name>span.fileactions').append($actionLink);\n\t\t\t\t\t\treturn $actionLink;\n\t\t\t\t\t}\n\t\t\t\t\treturn '';\n\t\t\t\t},\n\t\t\t\tactionHandler: function(fileName, context) {\n\t\t\t\t\tcontext.$file.find('.action-comment').tooltip('hide');\n\t\t\t\t\t// open sidebar in comments section\n\t\t\t\t\tcontext.fileList.showDetailsView(fileName, 'commentsTabView');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// add attribute to \"elementToFile\"\n\t\t\tvar oldElementToFile = fileList.elementToFile;\n\t\t\tfileList.elementToFile = function($el) {\n\t\t\t\tvar fileInfo = oldElementToFile.apply(this, arguments);\n\t\t\t\tvar commentsUnread = $el.data('comments-unread');\n\t\t\t\tif (commentsUnread) {\n\t\t\t\t\tfileInfo.commentsUnread = commentsUnread;\n\t\t\t\t}\n\t\t\t\treturn fileInfo;\n\t\t\t};\n\t\t}\n\t};\n\n})();\n\nOC.Plugins.register('OCA.Files.FileList', OCA.Comments.FilesPlugin);\n","/*\n * @author Joas Schilling <coding@schilljs.com>\n * Copyright (c) 2016\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n */\n\n(function() {\n\tOCA.Comments.ActivityTabViewPlugin = {\n\n\t\t/**\n\t\t * Prepare activity for display\n\t\t *\n\t\t * @param {OCA.Activity.ActivityModel} model for this activity\n\t\t * @param {jQuery} $el jQuery handle for this activity\n\t\t * @param {string} view The view that displayes this activity\n\t\t */\n\t\tprepareModelForDisplay: function (model, $el, view) {\n\t\t\tif (model.get('app') !== 'comments' || model.get('type') !== 'comments') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (view === 'ActivityTabView') {\n\t\t\t\t$el.addClass('comment');\n\t\t\t\tif (model.get('message') && this._isLong(model.get('message'))) {\n\t\t\t\t\t$el.addClass('collapsed');\n\t\t\t\t\tvar $overlay = $('<div>').addClass('message-overlay');\n\t\t\t\t\t$el.find('.activitymessage').after($overlay);\n\t\t\t\t\t$el.on('click', this._onClickCollapsedComment);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._onClickComment()\n\t\t */\n\t\t_onClickCollapsedComment: function(ev) {\n\t\t\tvar $row = $(ev.target);\n\t\t\tif (!$row.is('.comment')) {\n\t\t\t\t$row = $row.closest('.comment');\n\t\t\t}\n\t\t\t$row.removeClass('collapsed');\n\t\t},\n\n\t\t/*\n\t\t * Copy of CommentsTabView._isLong()\n\t\t */\n\t\t_isLong: function(message) {\n\t\t\treturn message.length > 250 || (message.match(/\\n/g) || []).length > 1;\n\t\t}\n\t};\n\n\n})();\n\nOC.Plugins.register('OCA.Activity.RenderingPlugins', OCA.Comments.ActivityTabViewPlugin);\n","/*\n * Copyright (c) 2014\n *\n * This file is licensed under the Affero General Public License version 3\n * or later.\n *\n * See the COPYING-README file.\n *\n */\n(function(OC, OCA, $) {\n\t\"use strict\";\n\n\t/**\n\t * Construct a new FileActions instance\n\t * @constructs Files\n\t */\n\tvar Comment = function() {\n\t\tthis.initialize();\n\t};\n\n\tComment.prototype = {\n\n\t\tfileList: null,\n\n\t\t/**\n\t\t * Initialize the file search\n\t\t */\n\t\tinitialize: function() {\n\n\t\t\tvar self = this;\n\n\t\t\tthis.fileAppLoaded = function() {\n\t\t\t\treturn !!OCA.Files && !!OCA.Files.App;\n\t\t\t};\n\t\t\tfunction inFileList($row, result) {\n\t\t\t\treturn false;\n\n\t\t\t\tif (! self.fileAppLoaded()) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tvar dir = self.fileList.getCurrentDirectory().replace(/\\/+$/,'');\n\t\t\t\tvar resultDir = OC.dirname(result.path);\n\t\t\t\treturn dir === resultDir && self.fileList.inList(result.name);\n\t\t\t}\n\t\t\tfunction hideNoFilterResults() {\n\t\t\t\tvar $nofilterresults = $('.nofilterresults');\n\t\t\t\tif ( ! $nofilterresults.hasClass('hidden') ) {\n\t\t\t\t\t$nofilterresults.addClass('hidden');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t *\n\t\t\t * @param {jQuery} $row\n\t\t\t * @param {Object} result\n\t\t\t * @param {int} result.id\n\t\t\t * @param {string} result.comment\n\t\t\t * @param {string} result.authorId\n\t\t\t * @param {string} result.authorName\n\t\t\t * @param {string} result.link\n\t\t\t * @param {string} result.fileName\n\t\t\t * @param {string} result.path\n\t\t\t * @returns {*}\n\t\t\t */\n\t\t\tthis.renderCommentResult = function($row, result) {\n\t\t\t\tif (inFileList($row, result)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\thideNoFilterResults();\n\t\t\t\t/*render preview icon, show path beneath filename,\n\t\t\t\t show size and last modified date on the right */\n\t\t\t\tthis.updateLegacyMimetype(result);\n\n\t\t\t\tvar $pathDiv = $('<div>').addClass('path').text(result.path);\n\n\t\t\t\tvar $avatar = $('<div>');\n\t\t\t\t$avatar.addClass('avatar')\n\t\t\t\t\t.css('display', 'inline-block')\n\t\t\t\t\t.css('vertical-align', 'middle')\n\t\t\t\t\t.css('margin', '0 5px 2px 3px');\n\n\t\t\t\tif (result.authorName) {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21, undefined, false, undefined, result.authorName);\n\t\t\t\t} else {\n\t\t\t\t\t$avatar.avatar(result.authorId, 21);\n\t\t\t\t}\n\n\t\t\t\t$row.find('td.info div.name').after($pathDiv).text(result.comment).prepend($('<span>').addClass('path').css('margin-right', '5px').text(result.authorName)).prepend($avatar);\n\t\t\t\t$row.find('td.result a').attr('href', result.link);\n\n\t\t\t\t$row.find('td.icon')\n\t\t\t\t\t.css('background-image', 'url(' + OC.imagePath('core', 'actions/comment') + ')')\n\t\t\t\t\t.css('opacity', '.4');\n\t\t\t\tvar dir = OC.dirname(result.path);\n\t\t\t\t// \"result.path\" does not include a leading \"/\", so \"OC.dirname\"\n\t\t\t\t// returns the path itself for files or folders in the root.\n\t\t\t\tif (dir === result.path) {\n\t\t\t\t\tdir = '/';\n\t\t\t\t}\n\t\t\t\t$row.find('td.info a').attr('href',\n\t\t\t\t\tOC.generateUrl('/apps/files/?dir={dir}&scrollto={scrollto}', {dir: dir, scrollto: result.fileName})\n\t\t\t\t);\n\n\t\t\t\treturn $row;\n\t\t\t};\n\n\t\t\tthis.handleCommentClick = function($row, result, event) {\n\t\t\t\tif (self.fileAppLoaded() && self.fileList.id === 'files') {\n\t\t\t\t\tself.fileList.changeDirectory(OC.dirname(result.path));\n\t\t\t\t\tself.fileList.scrollTo(result.name);\n\t\t\t\t\treturn false;\n\t\t\t\t} else {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.updateLegacyMimetype = function (result) {\n\t\t\t\t// backward compatibility:\n\t\t\t\tif (!result.mime && result.mime_type) {\n\t\t\t\t\tresult.mime = result.mime_type;\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.setFileList = function (fileList) {\n\t\t\t\tthis.fileList = fileList;\n\t\t\t};\n\n\t\t\tOC.Plugins.register('OCA.Search.Core', this);\n\t\t},\n\t\tattach: function(search) {\n\t\t\tsearch.setRenderer('comment', this.renderCommentResult.bind(this));\n\t\t\tsearch.setHandler('comment', this.handleCommentClick.bind(this));\n\t\t}\n\t};\n\n\tOCA.Search.comment = new Comment();\n})(OC, OCA, $);\n","/*! jquery.caret 2015-02-01 */\n!function(a,b){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(c){return a.returnExportsGlobal=b(c)}):\"object\"==typeof exports?module.exports=b(require(\"jquery\")):b(jQuery)}(this,function(a){\"use strict\";var b,c,d,e,f,g,h,i,j,k,l;k=\"caret\",b=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.setPos=function(){return this.domInputor},b.prototype.getIEPosition=function(){return this.getPosition()},b.prototype.getPosition=function(){var a,b;return b=this.getOffset(),a=this.$inputor.offset(),b.left-=a.left,b.top-=a.top,b},b.prototype.getOldIEPos=function(){var a,b;return b=h.selection.createRange(),a=h.body.createTextRange(),a.moveToElementText(this.domInputor),a.setEndPoint(\"EndToEnd\",b),a.text.length},b.prototype.getPos=function(){var a,b,c;return(c=this.range())?(a=c.cloneRange(),a.selectNodeContents(this.domInputor),a.setEnd(c.endContainer,c.endOffset),b=a.toString().length,a.detach(),b):h.selection?this.getOldIEPos():void 0},b.prototype.getOldIEOffset=function(){var a,b;return a=h.selection.createRange().duplicate(),a.moveStart(\"character\",-1),b=a.getBoundingClientRect(),{height:b.bottom-b.top,left:b.left,top:b.top}},b.prototype.getOffset=function(){var b,c,d,e,f;return j.getSelection&&(d=this.range())?(d.endOffset-1>0&&d.endContainer===!this.domInputor&&(b=d.cloneRange(),b.setStart(d.endContainer,d.endOffset-1),b.setEnd(d.endContainer,d.endOffset),e=b.getBoundingClientRect(),c={height:e.height,left:e.left+e.width,top:e.top},b.detach()),c&&0!==(null!=c?c.height:void 0)||(b=d.cloneRange(),f=a(h.createTextNode(\"|\")),b.insertNode(f[0]),b.selectNode(f[0]),e=b.getBoundingClientRect(),c={height:e.height,left:e.left,top:e.top},f.remove(),b.detach())):h.selection&&(c=this.getOldIEOffset()),c&&(c.top+=a(j).scrollTop(),c.left+=a(j).scrollLeft()),c},b.prototype.range=function(){var a;if(j.getSelection)return a=j.getSelection(),a.rangeCount>0?a.getRangeAt(0):null},b}(),c=function(){function b(a){this.$inputor=a,this.domInputor=this.$inputor[0]}return b.prototype.getIEPos=function(){var a,b,c,d,e,f,g;return b=this.domInputor,f=h.selection.createRange(),e=0,f&&f.parentElement()===b&&(d=b.value.replace(/\\r\\n/g,\"\\n\"),c=d.length,g=b.createTextRange(),g.moveToBookmark(f.getBookmark()),a=b.createTextRange(),a.collapse(!1),e=g.compareEndPoints(\"StartToEnd\",a)>-1?c:-g.moveStart(\"character\",-c)),e},b.prototype.getPos=function(){return h.selection?this.getIEPos():this.domInputor.selectionStart},b.prototype.setPos=function(a){var b,c;return b=this.domInputor,h.selection?(c=b.createTextRange(),c.move(\"character\",a),c.select()):b.setSelectionRange&&b.setSelectionRange(a,a),b},b.prototype.getIEOffset=function(a){var b,c,d,e;return c=this.domInputor.createTextRange(),a||(a=this.getPos()),c.move(\"character\",a),d=c.boundingLeft,e=c.boundingTop,b=c.boundingHeight,{left:d,top:e,height:b}},b.prototype.getOffset=function(b){var c,d,e;return c=this.$inputor,h.selection?(d=this.getIEOffset(b),d.top+=a(j).scrollTop()+c.scrollTop(),d.left+=a(j).scrollLeft()+c.scrollLeft(),d):(d=c.offset(),e=this.getPosition(b),d={left:d.left+e.left-c.scrollLeft(),top:d.top+e.top-c.scrollTop(),height:e.height})},b.prototype.getPosition=function(a){var b,c,e,f,g,h,i;return b=this.$inputor,f=function(a){return a=a.replace(/<|>|`|\"|&/g,\"?\").replace(/\\r\\n|\\r|\\n/g,\"<br/>\"),/firefox/i.test(navigator.userAgent)&&(a=a.replace(/\\s/g,\"&nbsp;\")),a},void 0===a&&(a=this.getPos()),i=b.val().slice(0,a),e=b.val().slice(a),g=\"<span style='position: relative; display: inline;'>\"+f(i)+\"</span>\",g+=\"<span id='caret' style='position: relative; display: inline;'>|</span>\",g+=\"<span style='position: relative; display: inline;'>\"+f(e)+\"</span>\",h=new d(b),c=h.create(g).rect()},b.prototype.getIEPosition=function(a){var b,c,d,e,f;return d=this.getIEOffset(a),c=this.$inputor.offset(),e=d.left-c.left,f=d.top-c.top,b=d.height,{left:e,top:f,height:b}},b}(),d=function(){function b(a){this.$inputor=a}return b.prototype.css_attr=[\"borderBottomWidth\",\"borderLeftWidth\",\"borderRightWidth\",\"borderTopStyle\",\"borderRightStyle\",\"borderBottomStyle\",\"borderLeftStyle\",\"borderTopWidth\",\"boxSizing\",\"fontFamily\",\"fontSize\",\"fontWeight\",\"height\",\"letterSpacing\",\"lineHeight\",\"marginBottom\",\"marginLeft\",\"marginRight\",\"marginTop\",\"outlineWidth\",\"overflow\",\"overflowX\",\"overflowY\",\"paddingBottom\",\"paddingLeft\",\"paddingRight\",\"paddingTop\",\"textAlign\",\"textOverflow\",\"textTransform\",\"whiteSpace\",\"wordBreak\",\"wordWrap\"],b.prototype.mirrorCss=function(){var b,c=this;return b={position:\"absolute\",left:-9999,top:0,zIndex:-2e4},\"TEXTAREA\"===this.$inputor.prop(\"tagName\")&&this.css_attr.push(\"width\"),a.each(this.css_attr,function(a,d){return b[d]=c.$inputor.css(d)}),b},b.prototype.create=function(b){return this.$mirror=a(\"<div></div>\"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(b),this.$inputor.after(this.$mirror),this},b.prototype.rect=function(){var a,b,c;return a=this.$mirror.find(\"#caret\"),b=a.position(),c={left:b.left,top:b.top,height:a.height()},this.$mirror.remove(),c},b}(),e={contentEditable:function(a){return!(!a[0].contentEditable||\"true\"!==a[0].contentEditable)}},g={pos:function(a){return a||0===a?this.setPos(a):this.getPos()},position:function(a){return h.selection?this.getIEPosition(a):this.getPosition(a)},offset:function(a){var b;return b=this.getOffset(a)}},h=null,j=null,i=null,l=function(a){var b;return(b=null!=a?a.iframe:void 0)?(i=b,j=b.contentWindow,h=b.contentDocument||j.document):(i=void 0,j=window,h=document)},f=function(a){var b;h=a[0].ownerDocument,j=h.defaultView||h.parentWindow;try{return i=j.frameElement}catch(c){b=c}},a.fn.caret=function(d,f,h){var i;return g[d]?(a.isPlainObject(f)?(l(f),f=void 0):l(h),i=e.contentEditable(this)?new b(this):new c(this),g[d].apply(i,[f])):a.error(\"Method \"+d+\" does not exist on jQuery.caret\")},a.fn.caret.EditableCaret=b,a.fn.caret.InputCaret=c,a.fn.caret.Utils=e,a.fn.caret.apis=g});","!function(t,e){\"function\"==typeof define&&define.amd?define([\"jquery\"],function(t){return e(t)}):\"object\"==typeof exports?module.exports=e(require(\"jquery\")):e(jQuery)}(this,function(t){var e,i;i={ESC:27,TAB:9,ENTER:13,CTRL:17,A:65,P:80,N:78,LEFT:37,UP:38,RIGHT:39,DOWN:40,BACKSPACE:8,SPACE:32},e={beforeSave:function(t){return r.arrayToDefaultHash(t)},matcher:function(t,e,i,n){var r,o,s,a,h;return t=t.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\"\\\\$&\"),i&&(t=\"(?:^|\\\\s)\"+t),r=decodeURI(\"%C3%80\"),o=decodeURI(\"%C3%BF\"),h=n?\" \":\"\",a=new RegExp(t+\"([A-Za-z\"+r+\"-\"+o+\"0-9_\"+h+\"'.+-]*)$|\"+t+\"([^\\\\x00-\\\\xff]*)$\",\"gi\"),s=a.exec(e),s?s[2]||s[1]:null},filter:function(t,e,i){var n,r,o,s;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],~new String(o[i]).toLowerCase().indexOf(t.toLowerCase())&&n.push(o);return n},remoteFilter:null,sorter:function(t,e,i){var n,r,o,s;if(!t)return e;for(n=[],r=0,s=e.length;s>r;r++)o=e[r],o.atwho_order=new String(o[i]).toLowerCase().indexOf(t.toLowerCase()),o.atwho_order>-1&&n.push(o);return n.sort(function(t,e){return t.atwho_order-e.atwho_order})},tplEval:function(t,e){var i,n,r;r=t;try{return\"string\"!=typeof t&&(r=t(e)),r.replace(/\\$\\{([^\\}]*)\\}/g,function(t,i,n){return e[i]})}catch(n){return i=n,\"\"}},highlighter:function(t,e){var i;return e?(i=new RegExp(\">\\\\s*([^<]*?)(\"+e.replace(\"+\",\"\\\\+\")+\")([^<]*)\\\\s*<\",\"ig\"),t.replace(i,function(t,e,i,n){return\"> \"+e+\"<strong>\"+i+\"</strong>\"+n+\" <\"})):t},beforeInsert:function(t,e,i){return t},beforeReposition:function(t){return t},afterMatchFailed:function(t,e){}};var n;n=function(){function e(e){this.currentFlag=null,this.controllers={},this.aliasMaps={},this.$inputor=t(e),this.setupRootElement(),this.listen()}return e.prototype.createContainer=function(e){var i;return null!=(i=this.$el)&&i.remove(),t(e.body).append(this.$el=t(\"<div class='atwho-container'></div>\"))},e.prototype.setupRootElement=function(e,i){var n,r;if(null==i&&(i=!1),e)this.window=e.contentWindow,this.document=e.contentDocument||this.window.document,this.iframe=e;else{this.document=this.$inputor[0].ownerDocument,this.window=this.document.defaultView||this.document.parentWindow;try{this.iframe=this.window.frameElement}catch(r){if(n=r,this.iframe=null,t.fn.atwho.debug)throw new Error(\"iframe auto-discovery is failed.\\nPlease use `setIframe` to set the target iframe manually.\\n\"+n)}}return this.createContainer((this.iframeAsRoot=i)?this.document:document)},e.prototype.controller=function(t){var e,i,n,r;if(this.aliasMaps[t])i=this.controllers[this.aliasMaps[t]];else{r=this.controllers;for(n in r)if(e=r[n],n===t){i=e;break}}return i?i:this.controllers[this.currentFlag]},e.prototype.setContextFor=function(t){return this.currentFlag=t,this},e.prototype.reg=function(t,e){var i,n;return n=(i=this.controllers)[t]||(i[t]=this.$inputor.is(\"[contentEditable]\")?new l(this,t):new s(this,t)),e.alias&&(this.aliasMaps[e.alias]=t),n.init(e),this},e.prototype.listen=function(){return this.$inputor.on(\"compositionstart\",function(t){return function(e){var i;return null!=(i=t.controller())&&i.view.hide(),t.isComposing=!0,null}}(this)).on(\"compositionend\",function(t){return function(e){return t.isComposing=!1,setTimeout(function(e){return t.dispatch(e)}),null}}(this)).on(\"keyup.atwhoInner\",function(t){return function(e){return t.onKeyup(e)}}(this)).on(\"keydown.atwhoInner\",function(t){return function(e){return t.onKeydown(e)}}(this)).on(\"blur.atwhoInner\",function(t){return function(e){var i;return(i=t.controller())?(i.expectedQueryCBId=null,i.view.hide(e,i.getOpt(\"displayTimeout\"))):void 0}}(this)).on(\"click.atwhoInner\",function(t){return function(e){return t.dispatch(e)}}(this)).on(\"scroll.atwhoInner\",function(t){return function(){var e;return e=t.$inputor.scrollTop(),function(i){var n,r;return n=i.target.scrollTop,e!==n&&null!=(r=t.controller())&&r.view.hide(i),e=n,!0}}}(this)())},e.prototype.shutdown=function(){var t,e,i;i=this.controllers;for(t in i)e=i[t],e.destroy(),delete this.controllers[t];return this.$inputor.off(\".atwhoInner\"),this.$el.remove()},e.prototype.dispatch=function(t){var e,i,n,r;n=this.controllers,r=[];for(e in n)i=n[e],r.push(i.lookUp(t));return r},e.prototype.onKeyup=function(e){var n;switch(e.keyCode){case i.ESC:e.preventDefault(),null!=(n=this.controller())&&n.view.hide();break;case i.DOWN:case i.UP:case i.CTRL:case i.ENTER:t.noop();break;case i.P:case i.N:e.ctrlKey||this.dispatch(e);break;default:this.dispatch(e)}},e.prototype.onKeydown=function(e){var n,r;if(r=null!=(n=this.controller())?n.view:void 0,r&&r.visible())switch(e.keyCode){case i.ESC:e.preventDefault(),r.hide(e);break;case i.UP:e.preventDefault(),r.prev();break;case i.DOWN:e.preventDefault(),r.next();break;case i.P:if(!e.ctrlKey)return;e.preventDefault(),r.prev();break;case i.N:if(!e.ctrlKey)return;e.preventDefault(),r.next();break;case i.TAB:case i.ENTER:case i.SPACE:if(!r.visible())return;if(!this.controller().getOpt(\"spaceSelectsMatch\")&&e.keyCode===i.SPACE)return;if(!this.controller().getOpt(\"tabSelectsMatch\")&&e.keyCode===i.TAB)return;r.highlighted()?(e.preventDefault(),r.choose(e)):r.hide(e);break;default:t.noop()}},e}();var r,o=[].slice;r=function(){function i(e,i){this.app=e,this.at=i,this.$inputor=this.app.$inputor,this.id=this.$inputor[0].id||this.uid(),this.expectedQueryCBId=null,this.setting=null,this.query=null,this.pos=0,this.range=null,0===(this.$el=t(\"#atwho-ground-\"+this.id,this.app.$el)).length&&this.app.$el.append(this.$el=t(\"<div id='atwho-ground-\"+this.id+\"'></div>\")),this.model=new u(this),this.view=new c(this)}return i.prototype.uid=function(){return(Math.random().toString(16)+\"000000000\").substr(2,8)+(new Date).getTime()},i.prototype.init=function(e){return this.setting=t.extend({},this.setting||t.fn.atwho[\"default\"],e),this.view.init(),this.model.reload(this.setting.data)},i.prototype.destroy=function(){return this.trigger(\"beforeDestroy\"),this.model.destroy(),this.view.destroy(),this.$el.remove()},i.prototype.callDefault=function(){var i,n,r,s;s=arguments[0],i=2<=arguments.length?o.call(arguments,1):[];try{return e[s].apply(this,i)}catch(r){return n=r,t.error(n+\" Or maybe At.js doesn't have function \"+s)}},i.prototype.trigger=function(t,e){var i,n;return null==e&&(e=[]),e.push(this),i=this.getOpt(\"alias\"),n=i?t+\"-\"+i+\".atwho\":t+\".atwho\",this.$inputor.trigger(n,e)},i.prototype.callbacks=function(t){return this.getOpt(\"callbacks\")[t]||e[t]},i.prototype.getOpt=function(t,e){var i,n;try{return this.setting[t]}catch(n){return i=n,null}},i.prototype.insertContentFor=function(e){var i,n;return n=this.getOpt(\"insertTpl\"),i=t.extend({},e.data(\"item-data\"),{\"atwho-at\":this.at}),this.callbacks(\"tplEval\").call(this,n,i,\"onInsert\")},i.prototype.renderView=function(t){var e;return e=this.getOpt(\"searchKey\"),t=this.callbacks(\"sorter\").call(this,this.query.text,t.slice(0,1001),e),this.view.render(t.slice(0,this.getOpt(\"limit\")))},i.arrayToDefaultHash=function(e){var i,n,r,o;if(!t.isArray(e))return e;for(o=[],i=0,r=e.length;r>i;i++)n=e[i],t.isPlainObject(n)?o.push(n):o.push({name:n});return o},i.prototype.lookUp=function(t){var e,i;if((!t||\"click\"!==t.type||this.getOpt(\"lookUpOnClick\"))&&(!this.getOpt(\"suspendOnComposing\")||!this.app.isComposing))return(e=this.catchQuery(t))?(this.app.setContextFor(this.at),(i=this.getOpt(\"delay\"))?this._delayLookUp(e,i):this._lookUp(e),e):(this.expectedQueryCBId=null,e)},i.prototype._delayLookUp=function(t,e){var i,n;return i=Date.now?Date.now():(new Date).getTime(),this.previousCallTime||(this.previousCallTime=i),n=e-(i-this.previousCallTime),n>0&&e>n?(this.previousCallTime=i,this._stopDelayedCall(),this.delayedCallTimeout=setTimeout(function(e){return function(){return e.previousCallTime=0,e.delayedCallTimeout=null,e._lookUp(t)}}(this),e)):(this._stopDelayedCall(),this.previousCallTime!==i&&(this.previousCallTime=0),this._lookUp(t))},i.prototype._stopDelayedCall=function(){return this.delayedCallTimeout?(clearTimeout(this.delayedCallTimeout),this.delayedCallTimeout=null):void 0},i.prototype._generateQueryCBId=function(){return{}},i.prototype._lookUp=function(e){var i;return i=function(t,e){return t===this.expectedQueryCBId?e&&e.length>0?this.renderView(this.constructor.arrayToDefaultHash(e)):this.view.hide():void 0},this.expectedQueryCBId=this._generateQueryCBId(),this.model.query(e.text,t.proxy(i,this,this.expectedQueryCBId))},i}();var s,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;s=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return a(i,e),i.prototype.catchQuery=function(){var t,e,i,n,r,o,s;return e=this.$inputor.val(),t=this.$inputor.caret(\"pos\",{iframe:this.app.iframe}),s=e.slice(0,t),r=this.callbacks(\"matcher\").call(this,this.at,s,this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),n=\"string\"==typeof r,n&&r.length<this.getOpt(\"minLen\",0)?void 0:(n&&r.length<=this.getOpt(\"maxLen\",20)?(o=t-r.length,i=o+r.length,this.pos=o,r={text:r,headPos:o,endPos:i},this.trigger(\"matched\",[this.at,r.text])):(r=null,this.view.hide()),this.query=r)},i.prototype.rect=function(){var e,i,n;if(e=this.$inputor.caret(\"offset\",this.pos-1,{iframe:this.app.iframe}))return this.app.iframe&&!this.app.iframeAsRoot&&(i=t(this.app.iframe).offset(),e.left+=i.left,e.top+=i.top),n=this.app.document.selection?0:2,{left:e.left,top:e.top,bottom:e.top+e.height+n}},i.prototype.insert=function(t,e){var i,n,r,o,s;return i=this.$inputor,n=i.val(),r=n.slice(0,Math.max(this.query.headPos-this.at.length,0)),o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\" \",t+=o,s=\"\"+r+t+n.slice(this.query.endPos||0),i.val(s),i.caret(\"pos\",r.length+t.length,{iframe:this.app.iframe}),i.is(\":focus\")||i.focus(),i.change()},i}(r);var l,a=function(t,e){function i(){this.constructor=t}for(var n in e)h.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;l=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return a(n,e),n.prototype._getRange=function(){var t;return t=this.app.window.getSelection(),t.rangeCount>0?t.getRangeAt(0):void 0},n.prototype._setRange=function(e,i,n){return null==n&&(n=this._getRange()),n&&i?(i=t(i)[0],\"after\"===e?(n.setEndAfter(i),n.setStartAfter(i)):(n.setEndBefore(i),n.setStartBefore(i)),n.collapse(!1),this._clearRange(n)):void 0},n.prototype._clearRange=function(t){var e;return null==t&&(t=this._getRange()),e=this.app.window.getSelection(),null==this.ctrl_a_pressed?(e.removeAllRanges(),e.addRange(t)):void 0},n.prototype._movingEvent=function(t){var e;return\"click\"===t.type||(e=t.which)===i.RIGHT||e===i.LEFT||e===i.UP||e===i.DOWN},n.prototype._unwrap=function(e){var i;return e=t(e).unwrap().get(0),(i=e.nextSibling)&&i.nodeValue&&(e.nodeValue+=i.nodeValue,t(i).remove()),e},n.prototype.catchQuery=function(e){var n,r,o,s,a,h,l,u,c,p,f,d;if((d=this._getRange())&&d.collapsed){if(e.which===i.ENTER)return(r=t(d.startContainer).closest(\".atwho-query\")).contents().unwrap(),r.is(\":empty\")&&r.remove(),(r=t(\".atwho-query\",this.app.document)).text(r.text()).contents().last().unwrap(),void this._clearRange();if(/firefox/i.test(navigator.userAgent)){if(t(d.startContainer).is(this.$inputor))return void this._clearRange();e.which===i.BACKSPACE&&d.startContainer.nodeType===document.ELEMENT_NODE&&(c=d.startOffset-1)>=0?(o=d.cloneRange(),o.setStart(d.startContainer,c),t(o.cloneContents()).contents().last().is(\".atwho-inserted\")&&(a=t(d.startContainer).contents().get(c),this._setRange(\"after\",t(a).contents().last()))):e.which===i.LEFT&&d.startContainer.nodeType===document.TEXT_NODE&&(n=t(d.startContainer.previousSibling),n.is(\".atwho-inserted\")&&0===d.startOffset&&this._setRange(\"after\",n.contents().last()))}if(t(d.startContainer).closest(\".atwho-inserted\").addClass(\"atwho-query\").siblings().removeClass(\"atwho-query\"),(r=t(\".atwho-query\",this.app.document)).length>0&&r.is(\":empty\")&&0===r.text().length&&r.remove(),this._movingEvent(e)||r.removeClass(\"atwho-inserted\"),r.length>0)switch(e.which){case i.LEFT:return this._setRange(\"before\",r.get(0),d),void r.removeClass(\"atwho-query\");case i.RIGHT:return this._setRange(\"after\",r.get(0).nextSibling,d),void r.removeClass(\"atwho-query\")}if(r.length>0&&(f=r.attr(\"data-atwho-at-query\"))&&(r.empty().html(f).attr(\"data-atwho-at-query\",null),this._setRange(\"after\",r.get(0),d)),o=d.cloneRange(),o.setStart(d.startContainer,0),u=this.callbacks(\"matcher\").call(this,this.at,o.toString(),this.getOpt(\"startWithSpace\"),this.getOpt(\"acceptSpaceBar\")),h=\"string\"==typeof u,0===r.length&&h&&(s=d.startOffset-this.at.length-u.length)>=0&&(d.setStart(d.startContainer,s),r=t(\"<span/>\",this.app.document).attr(this.getOpt(\"editableAtwhoQueryAttrs\")).addClass(\"atwho-query\"),d.surroundContents(r.get(0)),l=r.contents().last().get(0),l&&(/firefox/i.test(navigator.userAgent)?(d.setStart(l,l.length),d.setEnd(l,l.length),this._clearRange(d)):this._setRange(\"after\",l,d))),!(h&&u.length<this.getOpt(\"minLen\",0)))return h&&u.length<=this.getOpt(\"maxLen\",20)?(p={text:u,el:r},this.trigger(\"matched\",[this.at,p.text]),this.query=p):(this.view.hide(),this.query={el:r},r.text().indexOf(this.at)>=0&&(this._movingEvent(e)&&r.hasClass(\"atwho-inserted\")?r.removeClass(\"atwho-query\"):!1!==this.callbacks(\"afterMatchFailed\").call(this,this.at,r)&&this._setRange(\"after\",this._unwrap(r.text(r.text()).contents().first()))),null)}},n.prototype.rect=function(){var e,i,n;return n=this.query.el.offset(),n&&this.query.el[0].getClientRects().length?(this.app.iframe&&!this.app.iframeAsRoot&&(i=(e=t(this.app.iframe)).offset(),n.left+=i.left-this.$inputor.scrollLeft(),n.top+=i.top-this.$inputor.scrollTop()),n.bottom=n.top+this.query.el.height(),n):void 0},n.prototype.insert=function(t,e){var i,n,r,o,s;return this.$inputor.is(\":focus\")||this.$inputor.focus(),n=this.getOpt(\"functionOverrides\"),n.insert?n.insert.call(this,t,e):(o=\"\"===(o=this.getOpt(\"suffix\"))?o:o||\" \",i=e.data(\"item-data\"),this.query.el.removeClass(\"atwho-query\").addClass(\"atwho-inserted\").html(t).attr(\"data-atwho-at-query\",\"\"+i[\"atwho-at\"]+this.query.text).attr(\"contenteditable\",\"false\"),(r=this._getRange())&&(this.query.el.length&&r.setEndAfter(this.query.el[0]),r.collapse(!1),r.insertNode(s=this.app.document.createTextNode(\"\"+o)),this._setRange(\"after\",s,r)),this.$inputor.is(\":focus\")||this.$inputor.focus(),this.$inputor.change())},n}(r);var u;u=function(){function e(t){this.context=t,this.at=this.context.at,this.storage=this.context.$inputor}return e.prototype.destroy=function(){return this.storage.data(this.at,null)},e.prototype.saved=function(){return this.fetch()>0},e.prototype.query=function(t,e){var i,n,r;return n=this.fetch(),r=this.context.getOpt(\"searchKey\"),n=this.context.callbacks(\"filter\").call(this.context,t,n,r)||[],i=this.context.callbacks(\"remoteFilter\"),n.length>0||!i&&0===n.length?e(n):i.call(this.context,t,e)},e.prototype.fetch=function(){return this.storage.data(this.at)||[]},e.prototype.save=function(t){return this.storage.data(this.at,this.context.callbacks(\"beforeSave\").call(this.context,t||[]))},e.prototype.load=function(t){return!this.saved()&&t?this._load(t):void 0},e.prototype.reload=function(t){return this._load(t)},e.prototype._load=function(e){return\"string\"==typeof e?t.ajax(e,{dataType:\"json\"}).done(function(t){return function(e){return t.save(e)}}(this)):this.save(e)},e}();var c;c=function(){function e(e){this.context=e,this.$el=t(\"<div class='atwho-view'><ul class='atwho-view-ul'></ul></div>\"),this.$elUl=this.$el.children(),this.timeoutID=null,this.context.$el.append(this.$el),this.bindEvent()}return e.prototype.init=function(){var t,e;return e=this.context.getOpt(\"alias\")||this.context.at.charCodeAt(0),t=this.context.getOpt(\"headerTpl\"),t&&1===this.$el.children().length&&this.$el.prepend(t),this.$el.attr({id:\"at-view-\"+e})},e.prototype.destroy=function(){return this.$el.remove()},e.prototype.bindEvent=function(){var e,i,n;return e=this.$el.find(\"ul\"),i=0,n=0,e.on(\"mousemove.atwho-view\",\"li\",function(r){return function(r){var o;if((i!==r.clientX||n!==r.clientY)&&(i=r.clientX,n=r.clientY,o=t(r.currentTarget),!o.hasClass(\"cur\")))return e.find(\".cur\").removeClass(\"cur\"),o.addClass(\"cur\")}}(this)).on(\"click.atwho-view\",\"li\",function(i){return function(n){return e.find(\".cur\").removeClass(\"cur\"),t(n.currentTarget).addClass(\"cur\"),i.choose(n),n.preventDefault()}}(this))},e.prototype.visible=function(){return t.expr.filters.visible(this.$el[0])},e.prototype.highlighted=function(){return this.$el.find(\".cur\").length>0},e.prototype.choose=function(t){var e,i;return(e=this.$el.find(\".cur\")).length&&(i=this.context.insertContentFor(e),this.context._stopDelayedCall(),this.context.insert(this.context.callbacks(\"beforeInsert\").call(this.context,i,e,t),e),this.context.trigger(\"inserted\",[e,t]),this.hide(t)),this.context.getOpt(\"hideWithoutSuffix\")?this.stopShowing=!0:void 0},e.prototype.reposition=function(e){var i,n,r,o;return i=this.context.app.iframeAsRoot?this.context.app.window:window,e.bottom+this.$el.height()-t(i).scrollTop()>t(i).height()&&(e.bottom=e.top-this.$el.height()),e.left>(r=t(i).width()-this.$el.width()-5)&&(e.left=r),n={left:e.left,top:e.bottom},null!=(o=this.context.callbacks(\"beforeReposition\"))&&o.call(this.context,n),this.$el.offset(n),this.context.trigger(\"reposition\",[n])},e.prototype.next=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),e=t.next(),e.length||(e=this.$el.find(\"li:first\")),e.addClass(\"cur\"),i=e[0],n=i.offsetTop+i.offsetHeight+(i.nextSibling?i.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,n-this.$el.height()))},e.prototype.prev=function(){var t,e,i,n;return t=this.$el.find(\".cur\").removeClass(\"cur\"),i=t.prev(),i.length||(i=this.$el.find(\"li:last\")),i.addClass(\"cur\"),n=i[0],e=n.offsetTop+n.offsetHeight+(n.nextSibling?n.nextSibling.offsetHeight:0),this.scrollTop(Math.max(0,e-this.$el.height()))},e.prototype.scrollTop=function(t){var e;return e=this.context.getOpt(\"scrollDuration\"),e?this.$elUl.animate({scrollTop:t},e):this.$elUl.scrollTop(t)},e.prototype.show=function(){var t;return this.stopShowing?void(this.stopShowing=!1):(this.visible()||(this.$el.show(),this.$el.scrollTop(0),this.context.trigger(\"shown\")),(t=this.context.rect())?this.reposition(t):void 0)},e.prototype.hide=function(t,e){var i;if(this.visible())return isNaN(e)?(this.$el.hide(),this.context.trigger(\"hidden\",[t])):(i=function(t){return function(){return t.hide()}}(this),clearTimeout(this.timeoutID),this.timeoutID=setTimeout(i,e))},e.prototype.render=function(e){var i,n,r,o,s,a,h;if(!(t.isArray(e)&&e.length>0))return void this.hide();for(this.$el.find(\"ul\").empty(),n=this.$el.find(\"ul\"),h=this.context.getOpt(\"displayTpl\"),r=0,s=e.length;s>r;r++)o=e[r],o=t.extend({},o,{\"atwho-at\":this.context.at}),a=this.context.callbacks(\"tplEval\").call(this.context,h,o,\"onDisplay\"),i=t(this.context.callbacks(\"highlighter\").call(this.context,a,this.context.query.text)),i.data(\"item-data\",o),n.append(i);return this.show(),this.context.getOpt(\"highlightFirst\")?n.find(\"li:first\").addClass(\"cur\"):void 0},e}();var p;p={load:function(t,e){var i;return(i=this.controller(t))?i.model.load(e):void 0},isSelecting:function(){var t;return!!(null!=(t=this.controller())?t.view.visible():void 0)},hide:function(){var t;return null!=(t=this.controller())?t.view.hide():void 0},reposition:function(){var t;return(t=this.controller())?t.view.reposition(t.rect()):void 0},setIframe:function(t,e){return this.setupRootElement(t,e),null},run:function(){return this.dispatch()},destroy:function(){return this.shutdown(),this.$inputor.data(\"atwho\",null)}},t.fn.atwho=function(e){var i,r;return i=arguments,r=null,this.filter('textarea, input, [contenteditable=\"\"], [contenteditable=true]').each(function(){var o,s;return(s=(o=t(this)).data(\"atwho\"))||o.data(\"atwho\",s=new n(this)),\"object\"!=typeof e&&e?p[e]&&s?r=p[e].apply(s,Array.prototype.slice.call(i,1)):t.error(\"Method \"+e+\" does not exist on jQuery.atwho\"):s.reg(e.at,e)}),null!=r?r:this},t.fn.atwho[\"default\"]={at:void 0,alias:void 0,data:null,displayTpl:\"<li>${name}</li>\",insertTpl:\"${atwho-at}${name}\",headerTpl:null,callbacks:e,functionOverrides:{},searchKey:\"name\",suffix:void 0,hideWithoutSuffix:!1,startWithSpace:!0,acceptSpaceBar:!1,highlightFirst:!0,limit:5,maxLen:20,minLen:0,displayTimeout:300,delay:null,spaceSelectsMatch:!1,tabSelectsMatch:!0,editableAtwhoQueryAttrs:{},scrollDuration:150,suspendOnComposing:!0,lookUpOnClick:!0},t.fn.atwho.debug=!1});","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./autocomplete.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./autocomplete.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./autocomplete.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/**\\n * based upon apps/comments/js/vendor/At.js/dist/css/jquery.atwho.css,\\n * only changed colors and font-weight\\n */\\n.atwho-view {\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  display: none;\\n  margin-top: 18px;\\n  background: var(--color-main-background);\\n  color: var(--color-main-text);\\n  border: 1px solid var(--color-border);\\n  border-radius: var(--border-radius);\\n  box-shadow: 0 0 5px var(--color-box-shadow);\\n  min-width: 120px;\\n  z-index: 11110 !important; }\\n\\n.atwho-view .atwho-header {\\n  padding: 5px;\\n  margin: 5px;\\n  cursor: pointer;\\n  border-bottom: solid 1px var(--color-border);\\n  color: var(--color-main-text);\\n  font-size: 11px;\\n  font-weight: bold; }\\n\\n.atwho-view .atwho-header .small {\\n  color: var(--color-main-text);\\n  float: right;\\n  padding-top: 2px;\\n  margin-right: -5px;\\n  font-size: 12px;\\n  font-weight: normal; }\\n\\n.atwho-view .atwho-header:hover {\\n  cursor: default; }\\n\\n.atwho-view .cur {\\n  background: var(--color-primary);\\n  color: var(--color-primary-text); }\\n\\n.atwho-view .cur small {\\n  color: var(--color-primary-text); }\\n\\n.atwho-view strong {\\n  color: var(--color-main-text);\\n  font-weight: normal; }\\n\\n.atwho-view .cur strong {\\n  color: var(--color-primary-text);\\n  font-weight: normal; }\\n\\n.atwho-view ul {\\n  /* width: 100px; */\\n  list-style: none;\\n  padding: 0;\\n  margin: auto;\\n  max-height: 200px;\\n  overflow-y: auto; }\\n\\n.atwho-view ul li {\\n  display: block;\\n  padding: 5px 10px;\\n  border-bottom: 1px solid var(--color-border);\\n  cursor: pointer; }\\n\\n.atwho-view small {\\n  font-size: smaller;\\n  color: var(--color-main-text);\\n  font-weight: normal; }\\n\", \"\"]);\n\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\nvar content = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./comments.scss\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./comments.scss\", function() {\n\t\tvar newContent = require(\"!!../../../../node_modules/css-loader/dist/cjs.js!../../../../node_modules/sass-loader/lib/loader.js!./comments.scss\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"/*\\n * Copyright (c) 2016\\n *\\n * This file is licensed under the Affero General Public License version 3\\n * or later.\\n *\\n * See the COPYING-README file.\\n *\\n */\\n#commentsTabView .emptycontent {\\n  margin-top: 0; }\\n\\n#commentsTabView .newCommentForm {\\n  margin-left: 36px;\\n  position: relative; }\\n\\n#commentsTabView .newCommentForm .message {\\n  width: 100%;\\n  padding: 10px;\\n  min-height: 44px;\\n  margin: 0;\\n  /* Prevent the text from overlapping with the submit button. */\\n  padding-right: 30px; }\\n\\n#commentsTabView .newCommentForm .submit,\\n#commentsTabView .newCommentForm .submitLoading {\\n  width: 44px;\\n  height: 44px;\\n  margin: 0;\\n  padding: 13px;\\n  background-color: transparent;\\n  border: none;\\n  opacity: .3;\\n  position: absolute;\\n  bottom: 0;\\n  right: 0; }\\n\\n#commentsTabView .deleteLoading {\\n  padding: 14px;\\n  vertical-align: middle; }\\n\\n#commentsTabView .newCommentForm .submit:not(:disabled):hover,\\n#commentsTabView .newCommentForm .submit:not(:disabled):focus {\\n  opacity: 1; }\\n\\n#commentsTabView .newCommentForm div.message {\\n  resize: none; }\\n\\n#commentsTabView .newCommentForm div.message:empty:before {\\n  content: attr(data-placeholder);\\n  color: grey; }\\n\\n#commentsTabView .comment {\\n  position: relative;\\n  /** padding bottom is little more so that the top and bottom gap look uniform **/\\n  padding: 10px 0 15px; }\\n\\n#commentsTabView .comments .comment {\\n  border-top: 1px solid var(--color-border); }\\n\\n#commentsTabView .comment .avatar,\\n.atwho-view-ul * .avatar {\\n  width: 32px;\\n  height: 32px;\\n  line-height: 32px;\\n  margin-right: 5px; }\\n\\n#commentsTabView .comment .message .avatar,\\n.atwho-view-ul * .avatar {\\n  display: inline-block; }\\n\\n#activityTabView li.comment.collapsed .activitymessage,\\n#commentsTabView .comment.collapsed .message {\\n  white-space: pre-wrap; }\\n\\n#activityTabView li.comment.collapsed .activitymessage,\\n#commentsTabView .comment.collapsed .message {\\n  max-height: 70px;\\n  overflow: hidden; }\\n\\n#activityTabView li.comment .message-overlay,\\n#commentsTabView .comment .message-overlay {\\n  display: none; }\\n\\n#activityTabView li.comment.collapsed .message-overlay,\\n#commentsTabView .comment.collapsed .message-overlay {\\n  display: block;\\n  position: absolute;\\n  z-index: 2;\\n  height: 50px;\\n  pointer-events: none;\\n  left: 0;\\n  right: 0;\\n  bottom: 0;\\n  background: -moz-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -webkit-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -o-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: -ms-linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background: linear-gradient(rgba(var(--color-main-background), 0), var(--color-main-background));\\n  background-repeat: no-repeat; }\\n\\n#commentsTabView .hidden {\\n  display: none !important; }\\n\\n/** set min-height as 44px to ensure that it fits the button sizes. **/\\n#commentsTabView .comment .authorRow {\\n  min-height: 44px; }\\n\\n#commentsTabView .comment .authorRow .tooltip {\\n  /** because of the padding on the element, the tooltip appear too far up,\\n\\t adding this brings them closer to the element**/\\n  margin-top: 5px; }\\n\\n.atwho-view-ul * .avatar-name-wrapper,\\n#commentsTabView .comment .authorRow {\\n  position: relative;\\n  display: inline-flex;\\n  align-items: center;\\n  width: 100%; }\\n\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser),\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar,\\n#commentsTabView .comment:not(.newCommentRow) .message .avatar-name-wrapper:not(.currentUser) .avatar img,\\n#commentsTabView .comment .authorRow .avatar:not(.currentUser),\\n#commentsTabView .comment .authorRow .author:not(.currentUser) {\\n  cursor: pointer; }\\n\\n.atwho-view-ul .avatar-name-wrapper,\\n.atwho-view-ul .avatar-name-wrapper .avatar,\\n.atwho-view-ul .avatar-name-wrapper .avatar img {\\n  cursor: pointer; }\\n\\n#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper,\\n#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper {\\n  /* Make the wrapper the positioning context of its child contacts\\n\\t\\t * menu. */\\n  position: relative;\\n  display: inline;\\n  vertical-align: top;\\n  background-color: var(--color-background-dark);\\n  border-radius: 50vh;\\n  padding: 1px 7px 1px 1px;\\n  /* Ensure that the avatar and the user name will be kept together. */\\n  white-space: nowrap; }\\n  #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar,\\n  #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar {\\n    height: 16px;\\n    width: 16px;\\n    vertical-align: middle;\\n    padding: 1px;\\n    margin-top: -3px;\\n    margin-left: 0;\\n    margin-right: 2px; }\\n    #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper .avatar img,\\n    #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper .avatar img {\\n      vertical-align: top; }\\n  #commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper strong,\\n  #commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper strong {\\n    /* Ensure that the user name is shown in bold, as different browsers\\n\\t\\t\\t * use different font weights for strong elements. */\\n    font-weight: bold; }\\n\\n#commentsTabView .comments li .message .atwho-inserted .avatar-name-wrapper.currentUser,\\n#commentsTabView .newCommentForm .atwho-inserted .avatar-name-wrapper.currentUser {\\n  background-color: var(--color-primary);\\n  color: var(--color-primary-text); }\\n\\n.atwho-view-ul * .avatar-name-wrapper {\\n  white-space: nowrap; }\\n\\n#commentsTabView .comment .author,\\n#commentsTabView .comment .date {\\n  opacity: .5; }\\n\\n#commentsTabView .comment .author {\\n  max-width: 210px;\\n  text-overflow: ellipsis;\\n  overflow: hidden;\\n  white-space: nowrap; }\\n\\n#commentsTabView .comment .date {\\n  margin-left: auto;\\n  /** this is to fix the tooltip being too close due to the margin-top applied\\n\\t to bring the tooltip closer for the action icons **/\\n  padding: 10px 0px; }\\n\\n#commentsTabView .comments > li:not(.newCommentRow) .message {\\n  padding-left: 40px;\\n  word-wrap: break-word;\\n  overflow-wrap: break-word; }\\n\\n#commentsTabView .comment .action {\\n  opacity: 0.3;\\n  padding: 14px;\\n  display: block; }\\n\\n#commentsTabView .comment .action:hover,\\n#commentsTabView .comment .action:focus {\\n  opacity: 1; }\\n\\n#commentsTabView .newCommentRow .action-container {\\n  margin-left: auto; }\\n\\n#commentsTabView .comment.disabled .message {\\n  opacity: 0.3; }\\n\\n#commentsTabView .comment.disabled .action {\\n  display: none; }\\n\\n#commentsTabView .message.error {\\n  color: #e9322d;\\n  border-color: #e9322d;\\n  box-shadow: 0 0 6px #f8b9b7; }\\n\\n.app-files .action-comment {\\n  padding: 16px 14px; }\\n\\n#commentsTabView .comment .message .contactsmenu-popover {\\n  left: -6px;\\n  top: 24px; }\\n\", \"\"]);\n\n"],"sourceRoot":""}